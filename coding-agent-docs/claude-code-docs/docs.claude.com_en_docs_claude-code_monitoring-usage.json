{
  "markdown": "[Claude Docs home page![light logo](https://mintcdn.com/anthropic-claude-docs/DcI2Ybid7ZEnFaf0/logo/light.svg?fit=max&auto=format&n=DcI2Ybid7ZEnFaf0&q=85&s=c877c45432515ee69194cb19e9f983a2)![dark logo](https://mintcdn.com/anthropic-claude-docs/DcI2Ybid7ZEnFaf0/logo/dark.svg?fit=max&auto=format&n=DcI2Ybid7ZEnFaf0&q=85&s=f5bb877be0cb3cba86cf6d7c88185216)](https://docs.claude.com/)\n\n![US](https://d3gk2c5xim1je2.cloudfront.net/flags/US.svg)\n\nEnglish\n\nSearch...\n\nCtrl K\n\n- [Console](https://console.anthropic.com/login)\n- [Support](https://support.claude.com/)\n- [Discord](https://www.anthropic.com/discord)\n- [Sign up](https://console.anthropic.com/login)\n- [Sign up](https://console.anthropic.com/login)\n\nSearch...\n\nNavigation\n\nAdministration\n\nMonitoring\n\n[Welcome](https://docs.claude.com/en/home) [Claude Developer Platform](https://docs.claude.com/en/docs/intro) [Claude Code](https://docs.claude.com/en/docs/claude-code/overview) [Model Context Protocol (MCP)](https://docs.claude.com/en/docs/mcp) [API Reference](https://docs.claude.com/en/api/messages) [Resources](https://docs.claude.com/en/resources/overview) [Release Notes](https://docs.claude.com/en/release-notes/overview)\n\n##### Getting started\n\n- [Overview](https://docs.claude.com/en/docs/claude-code/overview)\n- [Quickstart](https://docs.claude.com/en/docs/claude-code/quickstart)\n- [Common workflows](https://docs.claude.com/en/docs/claude-code/common-workflows)\n- [Claude Code on the web](https://docs.claude.com/en/docs/claude-code/claude-code-on-the-web)\n\n##### Build with Claude Code\n\n- [Subagents](https://docs.claude.com/en/docs/claude-code/sub-agents)\n- [Plugins](https://docs.claude.com/en/docs/claude-code/plugins)\n- [Agent Skills](https://docs.claude.com/en/docs/claude-code/skills)\n- [Output styles](https://docs.claude.com/en/docs/claude-code/output-styles)\n- [Hooks](https://docs.claude.com/en/docs/claude-code/hooks-guide)\n- [Headless mode](https://docs.claude.com/en/docs/claude-code/headless)\n- [GitHub Actions](https://docs.claude.com/en/docs/claude-code/github-actions)\n- [GitLab CI/CD](https://docs.claude.com/en/docs/claude-code/gitlab-ci-cd)\n- [Model Context Protocol (MCP)](https://docs.claude.com/en/docs/claude-code/mcp)\n- [Troubleshooting](https://docs.claude.com/en/docs/claude-code/troubleshooting)\n\n##### Claude Agent SDK\n\n- [Migrate to Claude Agent SDK](https://docs.claude.com/en/docs/claude-code/sdk/migration-guide)\n\n##### Deployment\n\n- [Overview](https://docs.claude.com/en/docs/claude-code/third-party-integrations)\n- [Amazon Bedrock](https://docs.claude.com/en/docs/claude-code/amazon-bedrock)\n- [Google Vertex AI](https://docs.claude.com/en/docs/claude-code/google-vertex-ai)\n- [Network configuration](https://docs.claude.com/en/docs/claude-code/network-config)\n- [LLM gateway](https://docs.claude.com/en/docs/claude-code/llm-gateway)\n- [Development containers](https://docs.claude.com/en/docs/claude-code/devcontainer)\n- [Sandboxing](https://docs.claude.com/en/docs/claude-code/sandboxing)\n\n##### Administration\n\n- [Advanced installation](https://docs.claude.com/en/docs/claude-code/setup)\n- [Identity and Access Management](https://docs.claude.com/en/docs/claude-code/iam)\n- [Security](https://docs.claude.com/en/docs/claude-code/security)\n- [Data usage](https://docs.claude.com/en/docs/claude-code/data-usage)\n- [Monitoring](https://docs.claude.com/en/docs/claude-code/monitoring-usage)\n- [Costs](https://docs.claude.com/en/docs/claude-code/costs)\n- [Analytics](https://docs.claude.com/en/docs/claude-code/analytics)\n- [Plugin marketplaces](https://docs.claude.com/en/docs/claude-code/plugin-marketplaces)\n\n##### Configuration\n\n- [Settings](https://docs.claude.com/en/docs/claude-code/settings)\n- [Visual Studio Code](https://docs.claude.com/en/docs/claude-code/vs-code)\n- [JetBrains IDEs](https://docs.claude.com/en/docs/claude-code/jetbrains)\n- [Terminal configuration](https://docs.claude.com/en/docs/claude-code/terminal-config)\n- [Model configuration](https://docs.claude.com/en/docs/claude-code/model-config)\n- [Memory management](https://docs.claude.com/en/docs/claude-code/memory)\n- [Status line configuration](https://docs.claude.com/en/docs/claude-code/statusline)\n\n##### Reference\n\n- [CLI reference](https://docs.claude.com/en/docs/claude-code/cli-reference)\n- [Interactive mode](https://docs.claude.com/en/docs/claude-code/interactive-mode)\n- [Slash commands](https://docs.claude.com/en/docs/claude-code/slash-commands)\n- [Checkpointing](https://docs.claude.com/en/docs/claude-code/checkpointing)\n- [Hooks reference](https://docs.claude.com/en/docs/claude-code/hooks)\n- [Plugins reference](https://docs.claude.com/en/docs/claude-code/plugins-reference)\n\n##### Resources\n\n- [Legal and compliance](https://docs.claude.com/en/docs/claude-code/legal-and-compliance)\n\nOn this page\n\n- [Quick Start](https://docs.claude.com/en/docs/claude-code/monitoring-usage#quick-start)\n- [Administrator Configuration](https://docs.claude.com/en/docs/claude-code/monitoring-usage#administrator-configuration)\n- [Configuration Details](https://docs.claude.com/en/docs/claude-code/monitoring-usage#configuration-details)\n- [Common Configuration Variables](https://docs.claude.com/en/docs/claude-code/monitoring-usage#common-configuration-variables)\n- [Metrics Cardinality Control](https://docs.claude.com/en/docs/claude-code/monitoring-usage#metrics-cardinality-control)\n- [Dynamic Headers](https://docs.claude.com/en/docs/claude-code/monitoring-usage#dynamic-headers)\n- [Settings Configuration](https://docs.claude.com/en/docs/claude-code/monitoring-usage#settings-configuration)\n- [Script Requirements](https://docs.claude.com/en/docs/claude-code/monitoring-usage#script-requirements)\n- [Important Limitations](https://docs.claude.com/en/docs/claude-code/monitoring-usage#important-limitations)\n- [Multi-Team Organization Support](https://docs.claude.com/en/docs/claude-code/monitoring-usage#multi-team-organization-support)\n- [Example Configurations](https://docs.claude.com/en/docs/claude-code/monitoring-usage#example-configurations)\n- [Available Metrics and Events](https://docs.claude.com/en/docs/claude-code/monitoring-usage#available-metrics-and-events)\n- [Standard Attributes](https://docs.claude.com/en/docs/claude-code/monitoring-usage#standard-attributes)\n- [Metrics](https://docs.claude.com/en/docs/claude-code/monitoring-usage#metrics)\n- [Metric Details](https://docs.claude.com/en/docs/claude-code/monitoring-usage#metric-details)\n- [Session Counter](https://docs.claude.com/en/docs/claude-code/monitoring-usage#session-counter)\n- [Lines of Code Counter](https://docs.claude.com/en/docs/claude-code/monitoring-usage#lines-of-code-counter)\n- [Pull Request Counter](https://docs.claude.com/en/docs/claude-code/monitoring-usage#pull-request-counter)\n- [Commit Counter](https://docs.claude.com/en/docs/claude-code/monitoring-usage#commit-counter)\n- [Cost Counter](https://docs.claude.com/en/docs/claude-code/monitoring-usage#cost-counter)\n- [Token Counter](https://docs.claude.com/en/docs/claude-code/monitoring-usage#token-counter)\n- [Code Edit Tool Decision Counter](https://docs.claude.com/en/docs/claude-code/monitoring-usage#code-edit-tool-decision-counter)\n- [Active Time Counter](https://docs.claude.com/en/docs/claude-code/monitoring-usage#active-time-counter)\n- [Events](https://docs.claude.com/en/docs/claude-code/monitoring-usage#events)\n- [User Prompt Event](https://docs.claude.com/en/docs/claude-code/monitoring-usage#user-prompt-event)\n- [Tool Result Event](https://docs.claude.com/en/docs/claude-code/monitoring-usage#tool-result-event)\n- [API Request Event](https://docs.claude.com/en/docs/claude-code/monitoring-usage#api-request-event)\n- [API Error Event](https://docs.claude.com/en/docs/claude-code/monitoring-usage#api-error-event)\n- [Tool Decision Event](https://docs.claude.com/en/docs/claude-code/monitoring-usage#tool-decision-event)\n- [Interpreting Metrics and Events Data](https://docs.claude.com/en/docs/claude-code/monitoring-usage#interpreting-metrics-and-events-data)\n- [Usage Monitoring](https://docs.claude.com/en/docs/claude-code/monitoring-usage#usage-monitoring)\n- [Cost Monitoring](https://docs.claude.com/en/docs/claude-code/monitoring-usage#cost-monitoring)\n- [Alerting and Segmentation](https://docs.claude.com/en/docs/claude-code/monitoring-usage#alerting-and-segmentation)\n- [Event Analysis](https://docs.claude.com/en/docs/claude-code/monitoring-usage#event-analysis)\n- [Backend Considerations](https://docs.claude.com/en/docs/claude-code/monitoring-usage#backend-considerations)\n- [For Metrics:](https://docs.claude.com/en/docs/claude-code/monitoring-usage#for-metrics%3A)\n- [For Events/Logs:](https://docs.claude.com/en/docs/claude-code/monitoring-usage#for-events%2Flogs%3A)\n- [Service Information](https://docs.claude.com/en/docs/claude-code/monitoring-usage#service-information)\n- [ROI Measurement Resources](https://docs.claude.com/en/docs/claude-code/monitoring-usage#roi-measurement-resources)\n- [Security/Privacy Considerations](https://docs.claude.com/en/docs/claude-code/monitoring-usage#security%2Fprivacy-considerations)\n- [Monitoring Claude Code on Amazon Bedrock](https://docs.claude.com/en/docs/claude-code/monitoring-usage#monitoring-claude-code-on-amazon-bedrock)\n\nAdministration\n\n# Monitoring\n\nCopy page\n\nLearn how to enable and configure OpenTelemetry for Claude Code.\n\nCopy page\n\nClaude Code supports OpenTelemetry (OTel) metrics and events for monitoring and observability.All metrics are time series data exported via OpenTelemetry’s standard metrics protocol, and events are exported via OpenTelemetry’s logs/events protocol. It is the user’s responsibility to ensure their metrics and logs backends are properly configured and that the aggregation granularity meets their monitoring requirements.\n\nOpenTelemetry support is currently in beta and details are subject to change.\n\n## [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#quick-start)  Quick Start\n\nConfigure OpenTelemetry using environment variables:\n\nCopy\n\n```\n# 1. Enable telemetry\nexport CLAUDE_CODE_ENABLE_TELEMETRY=1\n\n# 2. Choose exporters (both are optional - configure only what you need)\nexport OTEL_METRICS_EXPORTER=otlp       # Options: otlp, prometheus, console\nexport OTEL_LOGS_EXPORTER=otlp          # Options: otlp, console\n\n# 3. Configure OTLP endpoint (for OTLP exporter)\nexport OTEL_EXPORTER_OTLP_PROTOCOL=grpc\nexport OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317\n\n# 4. Set authentication (if required)\nexport OTEL_EXPORTER_OTLP_HEADERS=\"Authorization=Bearer your-token\"\n\n# 5. For debugging: reduce export intervals\nexport OTEL_METRIC_EXPORT_INTERVAL=10000  # 10 seconds (default: 60000ms)\nexport OTEL_LOGS_EXPORT_INTERVAL=5000     # 5 seconds (default: 5000ms)\n\n# 6. Run Claude Code\nclaude\n\n```\n\nThe default export intervals are 60 seconds for metrics and 5 seconds for logs. During setup, you may want to use shorter intervals for debugging purposes. Remember to reset these for production use.\n\nFor full configuration options, see the [OpenTelemetry specification](https://github.com/open-telemetry/opentelemetry-specification/blob/main/specification/protocol/exporter.md#configuration-options).\n\n## [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#administrator-configuration)  Administrator Configuration\n\nAdministrators can configure OpenTelemetry settings for all users through the managed settings file. This allows for centralized control of telemetry settings across an organization. See the [settings precedence](https://docs.claude.com/en/docs/claude-code/settings#settings-precedence) for more information about how settings are applied.The managed settings file is located at:\n\n- macOS: `/Library/Application Support/ClaudeCode/managed-settings.json`\n- Linux and WSL: `/etc/claude-code/managed-settings.json`\n- Windows: `C:\\ProgramData\\ClaudeCode\\managed-settings.json`\n\nExample managed settings configuration:\n\nCopy\n\n```\n{\n  \"env\": {\n    \"CLAUDE_CODE_ENABLE_TELEMETRY\": \"1\",\n    \"OTEL_METRICS_EXPORTER\": \"otlp\",\n    \"OTEL_LOGS_EXPORTER\": \"otlp\",\n    \"OTEL_EXPORTER_OTLP_PROTOCOL\": \"grpc\",\n    \"OTEL_EXPORTER_OTLP_ENDPOINT\": \"http://collector.company.com:4317\",\n    \"OTEL_EXPORTER_OTLP_HEADERS\": \"Authorization=Bearer company-token\"\n  }\n}\n\n```\n\nManaged settings can be distributed via MDM (Mobile Device Management) or other device management solutions. Environment variables defined in the managed settings file have high precedence and cannot be overridden by users.\n\n## [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#configuration-details)  Configuration Details\n\n### [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#common-configuration-variables)  Common Configuration Variables\n\n| Environment Variable | Description | Example Values |\n| --- | --- | --- |\n| `CLAUDE_CODE_ENABLE_TELEMETRY` | Enables telemetry collection (required) | `1` |\n| `OTEL_METRICS_EXPORTER` | Metrics exporter type(s) (comma-separated) | `console`, `otlp`, `prometheus` |\n| `OTEL_LOGS_EXPORTER` | Logs/events exporter type(s) (comma-separated) | `console`, `otlp` |\n| `OTEL_EXPORTER_OTLP_PROTOCOL` | Protocol for OTLP exporter (all signals) | `grpc`, `http/json`, `http/protobuf` |\n| `OTEL_EXPORTER_OTLP_ENDPOINT` | OTLP collector endpoint (all signals) | `http://localhost:4317` |\n| `OTEL_EXPORTER_OTLP_METRICS_PROTOCOL` | Protocol for metrics (overrides general) | `grpc`, `http/json`, `http/protobuf` |\n| `OTEL_EXPORTER_OTLP_METRICS_ENDPOINT` | OTLP metrics endpoint (overrides general) | `http://localhost:4318/v1/metrics` |\n| `OTEL_EXPORTER_OTLP_LOGS_PROTOCOL` | Protocol for logs (overrides general) | `grpc`, `http/json`, `http/protobuf` |\n| `OTEL_EXPORTER_OTLP_LOGS_ENDPOINT` | OTLP logs endpoint (overrides general) | `http://localhost:4318/v1/logs` |\n| `OTEL_EXPORTER_OTLP_HEADERS` | Authentication headers for OTLP | `Authorization=Bearer token` |\n| `OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY` | Client key for mTLS authentication | Path to client key file |\n| `OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE` | Client certificate for mTLS authentication | Path to client cert file |\n| `OTEL_METRIC_EXPORT_INTERVAL` | Export interval in milliseconds (default: 60000) | `5000`, `60000` |\n| `OTEL_LOGS_EXPORT_INTERVAL` | Logs export interval in milliseconds (default: 5000) | `1000`, `10000` |\n| `OTEL_LOG_USER_PROMPTS` | Enable logging of user prompt content (default: disabled) | `1` to enable |\n\n### [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#metrics-cardinality-control)  Metrics Cardinality Control\n\nThe following environment variables control which attributes are included in metrics to manage cardinality:\n\n| Environment Variable | Description | Default Value | Example to Disable |\n| --- | --- | --- | --- |\n| `OTEL_METRICS_INCLUDE_SESSION_ID` | Include session.id attribute in metrics | `true` | `false` |\n| `OTEL_METRICS_INCLUDE_VERSION` | Include app.version attribute in metrics | `false` | `true` |\n| `OTEL_METRICS_INCLUDE_ACCOUNT_UUID` | Include user.account\\_uuid attribute in metrics | `true` | `false` |\n\nThese variables help control the cardinality of metrics, which affects storage requirements and query performance in your metrics backend. Lower cardinality generally means better performance and lower storage costs but less granular data for analysis.\n\n### [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#dynamic-headers)  Dynamic Headers\n\nFor enterprise environments that require dynamic authentication, you can configure a script to generate headers dynamically:\n\n#### [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#settings-configuration)  Settings Configuration\n\nAdd to your `.claude/settings.json`:\n\nCopy\n\n```\n{\n  \"otelHeadersHelper\": \"/bin/generate_opentelemetry_headers.sh\"\n}\n\n```\n\n#### [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#script-requirements)  Script Requirements\n\nThe script must output valid JSON with string key-value pairs representing HTTP headers:\n\nCopy\n\n```\n#!/bin/bash\n# Example: Multiple headers\necho \"{\\\"Authorization\\\": \\\"Bearer $(get-token.sh)\\\", \\\"X-API-Key\\\": \\\"$(get-api-key.sh)\\\"}\"\n\n```\n\n#### [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#important-limitations)  Important Limitations\n\n**Headers are fetched only at startup, not during runtime.** This is due to OpenTelemetry exporter architecture limitations.For scenarios requiring frequent token refresh, use an OpenTelemetry Collector as a proxy that can refresh its own headers.\n\n### [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#multi-team-organization-support)  Multi-Team Organization Support\n\nOrganizations with multiple teams or departments can add custom attributes to distinguish between different groups using the `OTEL_RESOURCE_ATTRIBUTES` environment variable:\n\nCopy\n\n```\n# Add custom attributes for team identification\nexport OTEL_RESOURCE_ATTRIBUTES=\"department=engineering,team.id=platform,cost_center=eng-123\"\n\n```\n\nThese custom attributes will be included in all metrics and events, allowing you to:\n\n- Filter metrics by team or department\n- Track costs per cost center\n- Create team-specific dashboards\n- Set up alerts for specific teams\n\n**Important formatting requirements for OTEL\\_RESOURCE\\_ATTRIBUTES:**The `OTEL_RESOURCE_ATTRIBUTES` environment variable follows the [W3C Baggage specification](https://www.w3.org/TR/baggage/), which has strict formatting requirements:\n\n- **No spaces allowed**: Values cannot contain spaces. For example, `user.organizationName=My Company` is invalid\n- **Format**: Must be comma-separated key=value pairs: `key1=value1,key2=value2`\n- **Allowed characters**: Only US-ASCII characters excluding control characters, whitespace, double quotes, commas, semicolons, and backslashes\n- **Special characters**: Characters outside the allowed range must be percent-encoded\n\n**Examples:**\n\nCopy\n\n```\n# ❌ Invalid - contains spaces\nexport OTEL_RESOURCE_ATTRIBUTES=\"org.name=John's Organization\"\n\n# ✅ Valid - use underscores or camelCase instead\nexport OTEL_RESOURCE_ATTRIBUTES=\"org.name=Johns_Organization\"\nexport OTEL_RESOURCE_ATTRIBUTES=\"org.name=JohnsOrganization\"\n\n# ✅ Valid - percent-encode special characters if needed\nexport OTEL_RESOURCE_ATTRIBUTES=\"org.name=John%27s%20Organization\"\n\n```\n\nNote: Quoting the entire key=value pair (e.g., `\"key=value with spaces\"`) is not supported by the OpenTelemetry specification and will result in attributes being prefixed with quotes.\n\n### [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#example-configurations)  Example Configurations\n\nCopy\n\n```\n# Console debugging (1-second intervals)\nexport CLAUDE_CODE_ENABLE_TELEMETRY=1\nexport OTEL_METRICS_EXPORTER=console\nexport OTEL_METRIC_EXPORT_INTERVAL=1000\n\n# OTLP/gRPC\nexport CLAUDE_CODE_ENABLE_TELEMETRY=1\nexport OTEL_METRICS_EXPORTER=otlp\nexport OTEL_EXPORTER_OTLP_PROTOCOL=grpc\nexport OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317\n\n# Prometheus\nexport CLAUDE_CODE_ENABLE_TELEMETRY=1\nexport OTEL_METRICS_EXPORTER=prometheus\n\n# Multiple exporters\nexport CLAUDE_CODE_ENABLE_TELEMETRY=1\nexport OTEL_METRICS_EXPORTER=console,otlp\nexport OTEL_EXPORTER_OTLP_PROTOCOL=http/json\n\n# Different endpoints/backends for metrics and logs\nexport CLAUDE_CODE_ENABLE_TELEMETRY=1\nexport OTEL_METRICS_EXPORTER=otlp\nexport OTEL_LOGS_EXPORTER=otlp\nexport OTEL_EXPORTER_OTLP_METRICS_PROTOCOL=http/protobuf\nexport OTEL_EXPORTER_OTLP_METRICS_ENDPOINT=http://metrics.company.com:4318\nexport OTEL_EXPORTER_OTLP_LOGS_PROTOCOL=grpc\nexport OTEL_EXPORTER_OTLP_LOGS_ENDPOINT=http://logs.company.com:4317\n\n# Metrics only (no events/logs)\nexport CLAUDE_CODE_ENABLE_TELEMETRY=1\nexport OTEL_METRICS_EXPORTER=otlp\nexport OTEL_EXPORTER_OTLP_PROTOCOL=grpc\nexport OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317\n\n# Events/logs only (no metrics)\nexport CLAUDE_CODE_ENABLE_TELEMETRY=1\nexport OTEL_LOGS_EXPORTER=otlp\nexport OTEL_EXPORTER_OTLP_PROTOCOL=grpc\nexport OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317\n\n```\n\n## [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#available-metrics-and-events)  Available Metrics and Events\n\n### [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#standard-attributes)  Standard Attributes\n\nAll metrics and events share these standard attributes:\n\n| Attribute | Description | Controlled By |\n| --- | --- | --- |\n| `session.id` | Unique session identifier | `OTEL_METRICS_INCLUDE_SESSION_ID` (default: true) |\n| `app.version` | Current Claude Code version | `OTEL_METRICS_INCLUDE_VERSION` (default: false) |\n| `organization.id` | Organization UUID (when authenticated) | Always included when available |\n| `user.account_uuid` | Account UUID (when authenticated) | `OTEL_METRICS_INCLUDE_ACCOUNT_UUID` (default: true) |\n| `terminal.type` | Terminal type (e.g., `iTerm.app`, `vscode`, `cursor`, `tmux`) | Always included when detected |\n\n### [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#metrics)  Metrics\n\nClaude Code exports the following metrics:\n\n| Metric Name | Description | Unit |\n| --- | --- | --- |\n| `claude_code.session.count` | Count of CLI sessions started | count |\n| `claude_code.lines_of_code.count` | Count of lines of code modified | count |\n| `claude_code.pull_request.count` | Number of pull requests created | count |\n| `claude_code.commit.count` | Number of git commits created | count |\n| `claude_code.cost.usage` | Cost of the Claude Code session | USD |\n| `claude_code.token.usage` | Number of tokens used | tokens |\n| `claude_code.code_edit_tool.decision` | Count of code editing tool permission decisions | count |\n| `claude_code.active_time.total` | Total active time in seconds | s |\n\n### [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#metric-details)  Metric Details\n\n#### [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#session-counter)  Session Counter\n\nIncremented at the start of each session.**Attributes**:\n\n- All [standard attributes](https://docs.claude.com/en/docs/claude-code/monitoring-usage#standard-attributes)\n\n#### [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#lines-of-code-counter)  Lines of Code Counter\n\nIncremented when code is added or removed.**Attributes**:\n\n- All [standard attributes](https://docs.claude.com/en/docs/claude-code/monitoring-usage#standard-attributes)\n- `type`: ( `\"added\"`, `\"removed\"`)\n\n#### [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#pull-request-counter)  Pull Request Counter\n\nIncremented when creating pull requests via Claude Code.**Attributes**:\n\n- All [standard attributes](https://docs.claude.com/en/docs/claude-code/monitoring-usage#standard-attributes)\n\n#### [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#commit-counter)  Commit Counter\n\nIncremented when creating git commits via Claude Code.**Attributes**:\n\n- All [standard attributes](https://docs.claude.com/en/docs/claude-code/monitoring-usage#standard-attributes)\n\n#### [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#cost-counter)  Cost Counter\n\nIncremented after each API request.**Attributes**:\n\n- All [standard attributes](https://docs.claude.com/en/docs/claude-code/monitoring-usage#standard-attributes)\n- `model`: Model identifier (e.g., “claude-3-5-sonnet-20241022”)\n\n#### [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#token-counter)  Token Counter\n\nIncremented after each API request.**Attributes**:\n\n- All [standard attributes](https://docs.claude.com/en/docs/claude-code/monitoring-usage#standard-attributes)\n- `type`: ( `\"input\"`, `\"output\"`, `\"cacheRead\"`, `\"cacheCreation\"`)\n- `model`: Model identifier (e.g., “claude-3-5-sonnet-20241022”)\n\n#### [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#code-edit-tool-decision-counter)  Code Edit Tool Decision Counter\n\nIncremented when user accepts or rejects Edit, Write, or NotebookEdit tool usage.**Attributes**:\n\n- All [standard attributes](https://docs.claude.com/en/docs/claude-code/monitoring-usage#standard-attributes)\n- `tool`: Tool name ( `\"Edit\"`, `\"Write\"`, `\"NotebookEdit\"`)\n- `decision`: User decision ( `\"accept\"`, `\"reject\"`)\n- `language`: Programming language of the edited file (e.g., `\"TypeScript\"`, `\"Python\"`, `\"JavaScript\"`, `\"Markdown\"`). Returns `\"unknown\"` for unrecognized file extensions.\n\n#### [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#active-time-counter)  Active Time Counter\n\nTracks actual time spent actively using Claude Code (not idle time). This metric is incremented during user interactions such as typing prompts or receiving responses.**Attributes**:\n\n- All [standard attributes](https://docs.claude.com/en/docs/claude-code/monitoring-usage#standard-attributes)\n\n### [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#events)  Events\n\nClaude Code exports the following events via OpenTelemetry logs/events (when `OTEL_LOGS_EXPORTER` is configured):\n\n#### [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#user-prompt-event)  User Prompt Event\n\nLogged when a user submits a prompt.**Event Name**: `claude_code.user_prompt`**Attributes**:\n\n- All [standard attributes](https://docs.claude.com/en/docs/claude-code/monitoring-usage#standard-attributes)\n- `event.name`: `\"user_prompt\"`\n- `event.timestamp`: ISO 8601 timestamp\n- `prompt_length`: Length of the prompt\n- `prompt`: Prompt content (redacted by default, enable with `OTEL_LOG_USER_PROMPTS=1`)\n\n#### [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#tool-result-event)  Tool Result Event\n\nLogged when a tool completes execution.**Event Name**: `claude_code.tool_result`**Attributes**:\n\n- All [standard attributes](https://docs.claude.com/en/docs/claude-code/monitoring-usage#standard-attributes)\n- `event.name`: `\"tool_result\"`\n- `event.timestamp`: ISO 8601 timestamp\n- `tool_name`: Name of the tool\n- `success`: `\"true\"` or `\"false\"`\n- `duration_ms`: Execution time in milliseconds\n- `error`: Error message (if failed)\n- `decision`: Either `\"accept\"` or `\"reject\"`\n- `source`: Decision source - `\"config\"`, `\"user_permanent\"`, `\"user_temporary\"`, `\"user_abort\"`, or `\"user_reject\"`\n- `tool_parameters`: JSON string containing tool-specific parameters (when available)\n\n  - For Bash tool: includes `bash_command`, `full_command`, `timeout`, `description`, `sandbox`\n\n#### [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#api-request-event)  API Request Event\n\nLogged for each API request to Claude.**Event Name**: `claude_code.api_request`**Attributes**:\n\n- All [standard attributes](https://docs.claude.com/en/docs/claude-code/monitoring-usage#standard-attributes)\n- `event.name`: `\"api_request\"`\n- `event.timestamp`: ISO 8601 timestamp\n- `model`: Model used (e.g., “claude-3-5-sonnet-20241022”)\n- `cost_usd`: Estimated cost in USD\n- `duration_ms`: Request duration in milliseconds\n- `input_tokens`: Number of input tokens\n- `output_tokens`: Number of output tokens\n- `cache_read_tokens`: Number of tokens read from cache\n- `cache_creation_tokens`: Number of tokens used for cache creation\n\n#### [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#api-error-event)  API Error Event\n\nLogged when an API request to Claude fails.**Event Name**: `claude_code.api_error`**Attributes**:\n\n- All [standard attributes](https://docs.claude.com/en/docs/claude-code/monitoring-usage#standard-attributes)\n- `event.name`: `\"api_error\"`\n- `event.timestamp`: ISO 8601 timestamp\n- `model`: Model used (e.g., “claude-3-5-sonnet-20241022”)\n- `error`: Error message\n- `status_code`: HTTP status code (if applicable)\n- `duration_ms`: Request duration in milliseconds\n- `attempt`: Attempt number (for retried requests)\n\n#### [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#tool-decision-event)  Tool Decision Event\n\nLogged when a tool permission decision is made (accept/reject).**Event Name**: `claude_code.tool_decision`**Attributes**:\n\n- All [standard attributes](https://docs.claude.com/en/docs/claude-code/monitoring-usage#standard-attributes)\n- `event.name`: `\"tool_decision\"`\n- `event.timestamp`: ISO 8601 timestamp\n- `tool_name`: Name of the tool (e.g., “Read”, “Edit”, “Write”, “NotebookEdit”, etc.)\n- `decision`: Either `\"accept\"` or `\"reject\"`\n- `source`: Decision source - `\"config\"`, `\"user_permanent\"`, `\"user_temporary\"`, `\"user_abort\"`, or `\"user_reject\"`\n\n## [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#interpreting-metrics-and-events-data)  Interpreting Metrics and Events Data\n\nThe metrics exported by Claude Code provide valuable insights into usage patterns and productivity. Here are some common visualizations and analyses you can create:\n\n### [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#usage-monitoring)  Usage Monitoring\n\n| Metric | Analysis Opportunity |\n| --- | --- |\n| `claude_code.token.usage` | Break down by `type` (input/output), user, team, or model |\n| `claude_code.session.count` | Track adoption and engagement over time |\n| `claude_code.lines_of_code.count` | Measure productivity by tracking code additions/removals |\n| `claude_code.commit.count` & `claude_code.pull_request.count` | Understand impact on development workflows |\n\n### [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#cost-monitoring)  Cost Monitoring\n\nThe `claude_code.cost.usage` metric helps with:\n\n- Tracking usage trends across teams or individuals\n- Identifying high-usage sessions for optimization\n\nCost metrics are approximations. For official billing data, refer to your API provider (Claude Console, AWS Bedrock, or Google Cloud Vertex).\n\n### [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#alerting-and-segmentation)  Alerting and Segmentation\n\nCommon alerts to consider:\n\n- Cost spikes\n- Unusual token consumption\n- High session volume from specific users\n\nAll metrics can be segmented by `user.account_uuid`, `organization.id`, `session.id`, `model`, and `app.version`.\n\n### [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#event-analysis)  Event Analysis\n\nThe event data provides detailed insights into Claude Code interactions:**Tool Usage Patterns**: Analyze tool result events to identify:\n\n- Most frequently used tools\n- Tool success rates\n- Average tool execution times\n- Error patterns by tool type\n\n**Performance Monitoring**: Track API request durations and tool execution times to identify performance bottlenecks.\n\n## [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#backend-considerations)  Backend Considerations\n\nYour choice of metrics and logs backends will determine the types of analyses you can perform:\n\n### [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#for-metrics%3A)  For Metrics:\n\n- **Time series databases (e.g., Prometheus)**: Rate calculations, aggregated metrics\n- **Columnar stores (e.g., ClickHouse)**: Complex queries, unique user analysis\n- **Full-featured observability platforms (e.g., Honeycomb, Datadog)**: Advanced querying, visualization, alerting\n\n### [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#for-events%2Flogs%3A)  For Events/Logs:\n\n- **Log aggregation systems (e.g., Elasticsearch, Loki)**: Full-text search, log analysis\n- **Columnar stores (e.g., ClickHouse)**: Structured event analysis\n- **Full-featured observability platforms (e.g., Honeycomb, Datadog)**: Correlation between metrics and events\n\nFor organizations requiring Daily/Weekly/Monthly Active User (DAU/WAU/MAU) metrics, consider backends that support efficient unique value queries.\n\n## [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#service-information)  Service Information\n\nAll metrics and events are exported with the following resource attributes:\n\n- `service.name`: `claude-code`\n- `service.version`: Current Claude Code version\n- `os.type`: Operating system type (e.g., `linux`, `darwin`, `windows`)\n- `os.version`: Operating system version string\n- `host.arch`: Host architecture (e.g., `amd64`, `arm64`)\n- `wsl.version`: WSL version number (only present when running on Windows Subsystem for Linux)\n- Meter Name: `com.anthropic.claude_code`\n\n## [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#roi-measurement-resources)  ROI Measurement Resources\n\nFor a comprehensive guide on measuring return on investment for Claude Code, including telemetry setup, cost analysis, productivity metrics, and automated reporting, see the [Claude Code ROI Measurement Guide](https://github.com/anthropics/claude-code-monitoring-guide). This repository provides ready-to-use Docker Compose configurations, Prometheus and OpenTelemetry setups, and templates for generating productivity reports integrated with tools like Linear.\n\n## [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#security%2Fprivacy-considerations)  Security/Privacy Considerations\n\n- Telemetry is opt-in and requires explicit configuration\n- Sensitive information like API keys or file contents are never included in metrics or events\n- User prompt content is redacted by default - only prompt length is recorded. To enable user prompt logging, set `OTEL_LOG_USER_PROMPTS=1`\n\n## [​](https://docs.claude.com/en/docs/claude-code/monitoring-usage\\#monitoring-claude-code-on-amazon-bedrock)  Monitoring Claude Code on Amazon Bedrock\n\nFor detailed Claude Code usage monitoring guidance for Amazon Bedrock, see [Claude Code Monitoring Implementation (Bedrock)](https://github.com/aws-solutions-library-samples/guidance-for-claude-code-with-amazon-bedrock/blob/main/assets/docs/MONITORING.md).\n\nWas this page helpful?\n\nYesNo\n\n[Data usage](https://docs.claude.com/en/docs/claude-code/data-usage) [Costs](https://docs.claude.com/en/docs/claude-code/costs)\n\nAssistant\n\nResponses are generated using AI and may contain mistakes.\n\n[Claude Docs home page![light logo](https://mintcdn.com/anthropic-claude-docs/DcI2Ybid7ZEnFaf0/logo/light.svg?fit=max&auto=format&n=DcI2Ybid7ZEnFaf0&q=85&s=c877c45432515ee69194cb19e9f983a2)![dark logo](https://mintcdn.com/anthropic-claude-docs/DcI2Ybid7ZEnFaf0/logo/dark.svg?fit=max&auto=format&n=DcI2Ybid7ZEnFaf0&q=85&s=f5bb877be0cb3cba86cf6d7c88185216)](https://docs.claude.com/)\n\n[x](https://x.com/AnthropicAI) [linkedin](https://www.linkedin.com/company/anthropicresearch)\n\nCompany\n\n[Anthropic](https://www.anthropic.com/company) [Careers](https://www.anthropic.com/careers) [Economic Futures](https://www.anthropic.com/economic-futures) [Research](https://www.anthropic.com/research) [News](https://www.anthropic.com/news) [Trust center](https://trust.anthropic.com/) [Transparency](https://www.anthropic.com/transparency)\n\nHelp and security\n\n[Availability](https://www.anthropic.com/supported-countries) [Status](https://status.anthropic.com/) [Support center](https://support.claude.com/)\n\nLearn\n\n[Courses](https://www.anthropic.com/learn) [MCP connectors](https://claude.com/partners/mcp) [Customer stories](https://www.claude.com/customers) [Engineering blog](https://www.anthropic.com/engineering) [Events](https://www.anthropic.com/events) [Powered by Claude](https://claude.com/partners/powered-by-claude) [Service partners](https://claude.com/partners/services) [Startups program](https://claude.com/programs/startups)\n\nTerms and policies\n\n[Privacy policy](https://www.anthropic.com/legal/privacy) [Disclosure policy](https://www.anthropic.com/responsible-disclosure-policy) [Usage policy](https://www.anthropic.com/legal/aup) [Commercial terms](https://www.anthropic.com/legal/commercial-terms) [Consumer terms](https://www.anthropic.com/legal/consumer-terms)\n\nAsk Docs\nAI Avatar",
  "metadata": {
    "og:type": "website",
    "twitter:description": "Learn how to enable and configure OpenTelemetry for Claude Code.",
    "msapplication-TileColor": "#0E0E0E",
    "twitter:image:height": "630",
    "charset": "utf-8",
    "ogTitle": "Monitoring - Claude Docs",
    "ogDescription": "Learn how to enable and configure OpenTelemetry for Claude Code.",
    "og:image": "https://anthropic-claude-docs.mintlify.app/_next/image?url=%2F_mintlify%2Fapi%2Fog%3Fdivision%3DAdministration%26appearance%3Dlight%26title%3DMonitoring%26description%3DLearn%2Bhow%2Bto%2Benable%2Band%2Bconfigure%2BOpenTelemetry%2Bfor%2BClaude%2BCode.%26logoLight%3Dhttps%253A%252F%252Fmintcdn.com%252Fanthropic-claude-docs%252FDcI2Ybid7ZEnFaf0%252Flogo%252Flight.svg%253Ffit%253Dmax%2526auto%253Dformat%2526n%253DDcI2Ybid7ZEnFaf0%2526q%253D85%2526s%253Dc877c45432515ee69194cb19e9f983a2%26logoDark%3Dhttps%253A%252F%252Fmintcdn.com%252Fanthropic-claude-docs%252FDcI2Ybid7ZEnFaf0%252Flogo%252Fdark.svg%253Ffit%253Dmax%2526auto%253Dformat%2526n%253DDcI2Ybid7ZEnFaf0%2526q%253D85%2526s%253Df5bb877be0cb3cba86cf6d7c88185216%26primaryColor%3D%25230E0E0E%26lightColor%3D%2523D4A27F%26darkColor%3D%25230E0E0E%26backgroundLight%3D%2523FDFDF7%26backgroundDark%3D%252309090B&w=1200&q=100",
    "language": "en",
    "title": "Monitoring - Claude Docs",
    "description": "Learn how to enable and configure OpenTelemetry for Claude Code.",
    "og:description": "Learn how to enable and configure OpenTelemetry for Claude Code.",
    "twitter:card": "summary_large_image",
    "generator": "Mintlify",
    "og:title": "Monitoring - Claude Docs",
    "ogImage": "https://anthropic-claude-docs.mintlify.app/_next/image?url=%2F_mintlify%2Fapi%2Fog%3Fdivision%3DAdministration%26appearance%3Dlight%26title%3DMonitoring%26description%3DLearn%2Bhow%2Bto%2Benable%2Band%2Bconfigure%2BOpenTelemetry%2Bfor%2BClaude%2BCode.%26logoLight%3Dhttps%253A%252F%252Fmintcdn.com%252Fanthropic-claude-docs%252FDcI2Ybid7ZEnFaf0%252Flogo%252Flight.svg%253Ffit%253Dmax%2526auto%253Dformat%2526n%253DDcI2Ybid7ZEnFaf0%2526q%253D85%2526s%253Dc877c45432515ee69194cb19e9f983a2%26logoDark%3Dhttps%253A%252F%252Fmintcdn.com%252Fanthropic-claude-docs%252FDcI2Ybid7ZEnFaf0%252Flogo%252Fdark.svg%253Ffit%253Dmax%2526auto%253Dformat%2526n%253DDcI2Ybid7ZEnFaf0%2526q%253D85%2526s%253Df5bb877be0cb3cba86cf6d7c88185216%26primaryColor%3D%25230E0E0E%26lightColor%3D%2523D4A27F%26darkColor%3D%25230E0E0E%26backgroundLight%3D%2523FDFDF7%26backgroundDark%3D%252309090B&w=1200&q=100",
    "twitter:image:width": "1200",
    "favicon": "https://mintcdn.com/anthropic-claude-docs/JaG275Sqw0maE7Ce/_generated/favicon/favicon-16x16.png?fit=max&n=JaG275Sqw0maE7Ce&s=b20efcf65eab17019f139f435bec262e",
    "msapplication-config": "https://mintcdn.com/anthropic-claude-docs/JaG275Sqw0maE7Ce/_generated/favicon/browserconfig.xml?n=JaG275Sqw0maE7Ce&s=31cc0bae38445be839155997a2084e7e",
    "application-name": "Claude Docs",
    "viewport": "width=device-width, initial-scale=1",
    "twitter:title": "Monitoring - Claude Docs",
    "twitter:image": "https://anthropic-claude-docs.mintlify.app/_next/image?url=%2F_mintlify%2Fapi%2Fog%3Fdivision%3DAdministration%26appearance%3Dlight%26title%3DMonitoring%26description%3DLearn%2Bhow%2Bto%2Benable%2Band%2Bconfigure%2BOpenTelemetry%2Bfor%2BClaude%2BCode.%26logoLight%3Dhttps%253A%252F%252Fmintcdn.com%252Fanthropic-claude-docs%252FDcI2Ybid7ZEnFaf0%252Flogo%252Flight.svg%253Ffit%253Dmax%2526auto%253Dformat%2526n%253DDcI2Ybid7ZEnFaf0%2526q%253D85%2526s%253Dc877c45432515ee69194cb19e9f983a2%26logoDark%3Dhttps%253A%252F%252Fmintcdn.com%252Fanthropic-claude-docs%252FDcI2Ybid7ZEnFaf0%252Flogo%252Fdark.svg%253Ffit%253Dmax%2526auto%253Dformat%2526n%253DDcI2Ybid7ZEnFaf0%2526q%253D85%2526s%253Df5bb877be0cb3cba86cf6d7c88185216%26primaryColor%3D%25230E0E0E%26lightColor%3D%2523D4A27F%26darkColor%3D%25230E0E0E%26backgroundLight%3D%2523FDFDF7%26backgroundDark%3D%252309090B&w=1200&q=100",
    "next-size-adjust": "",
    "apple-mobile-web-app-title": "Claude Docs",
    "og:site_name": "Claude Docs",
    "og:image:width": "1200",
    "og:image:height": "630",
    "scrapeId": "adb7616c-6e4a-4fa3-a7d0-19e263ba5023",
    "sourceURL": "https://docs.claude.com/en/docs/claude-code/monitoring-usage",
    "url": "https://docs.claude.com/en/docs/claude-code/monitoring-usage",
    "statusCode": 200,
    "contentType": "text/html; charset=utf-8",
    "proxyUsed": "basic",
    "cacheState": "hit",
    "cachedAt": "2025-10-21T19:34:59.606Z",
    "creditsUsed": 1
  }
}