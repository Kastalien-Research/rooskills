{
  "markdown": "Get comprehensive, actionable reviews directly in your PRs. [Try Roo's PR Reviewer](https://roocode.com/reviewer?utm_source=docs&utm_medium=banner&utm_campaign=reviewer_promo)\n\n[Skip to main content](https://docs.roocode.com/advanced-usage/available-tools/use-mcp-tool#__docusaurus_skipToContent_fallback)\n\n[![Roo Code Logo](https://docs.roocode.com/img/roo-code-logo-dark.png)](https://docs.roocode.com/)\n\n`ctrl`  `K`\n\n[Reddit](https://www.reddit.com/r/RooCode/ \"Reddit\")[Discord](https://discord.gg/roocode \"Discord\")\n\n[20.3k](https://github.com/RooCodeInc/Roo-Code \"GitHub Repository\") [Install ·934.6k](https://marketplace.visualstudio.com/items?itemName=RooVeterinaryInc.roo-cline \"Install VS Code Extension\")\n\n- [Welcome](https://docs.roocode.com/)\n- [Getting Started](https://docs.roocode.com/advanced-usage/available-tools/use-mcp-tool#)\n\n- [Tutorial Videos](https://docs.roocode.com/advanced-usage/available-tools/use-mcp-tool#)\n\n- [Roo Code Cloud](https://docs.roocode.com/advanced-usage/available-tools/use-mcp-tool#)\n\n- Features\n\n  - [API Configuration Profiles](https://docs.roocode.com/features/api-configuration-profiles)\n  - [Auto-Approving Actions](https://docs.roocode.com/features/auto-approving-actions)\n  - [Boomerang Tasks](https://docs.roocode.com/features/boomerang-tasks)\n  - [Browser Use](https://docs.roocode.com/features/browser-use)\n  - [Checkpoints](https://docs.roocode.com/features/checkpoints)\n  - [Code Actions](https://docs.roocode.com/features/code-actions)\n  - [Codebase Indexing](https://docs.roocode.com/features/codebase-indexing)\n  - [Custom Instructions](https://docs.roocode.com/features/custom-instructions)\n  - [Diagnostics Integration](https://docs.roocode.com/features/diagnostics-integration)\n  - [Customizing Modes](https://docs.roocode.com/features/custom-modes)\n  - [Diff/Fast Edits](https://docs.roocode.com/features/fast-edits)\n  - [Enhance Prompt](https://docs.roocode.com/features/enhance-prompt)\n  - [Import/Export/Reset Settings](https://docs.roocode.com/features/settings-management)\n  - [Intelligent Context Condensing](https://docs.roocode.com/features/intelligent-context-condensing)\n  - [Keyboard Navigation](https://docs.roocode.com/features/keyboard-shortcuts)\n  - [Roo Code Marketplace](https://docs.roocode.com/features/marketplace)\n  - [Message Queueing](https://docs.roocode.com/features/message-queueing)\n  - [Model Temperature](https://docs.roocode.com/features/model-temperature)\n  - [Multi-File Reads](https://docs.roocode.com/features/concurrent-file-reads)\n  - [.rooignore](https://docs.roocode.com/features/rooignore)\n  - [Slash Commands](https://docs.roocode.com/features/slash-commands)\n  - [Suggested Responses](https://docs.roocode.com/features/suggested-responses)\n  - [Task Todo List](https://docs.roocode.com/features/task-todo-list)\n  - [Terminal Shell Integration](https://docs.roocode.com/features/shell-integration)\n  - [MCP](https://docs.roocode.com/advanced-usage/available-tools/use-mcp-tool#)\n\n  - [Experimental](https://docs.roocode.com/advanced-usage/available-tools/use-mcp-tool#)\n\n  - [Additional Features](https://docs.roocode.com/features/more-features)\n- [Advanced Usage](https://docs.roocode.com/advanced-usage/available-tools/use-mcp-tool#)\n\n  - [Available Tools](https://docs.roocode.com/advanced-usage/available-tools/use-mcp-tool#)\n\n    - [Tool Use Overview](https://docs.roocode.com/advanced-usage/available-tools/tool-use-overview)\n    - [access\\_mcp\\_resource](https://docs.roocode.com/advanced-usage/available-tools/access-mcp-resource)\n    - [apply\\_diff](https://docs.roocode.com/advanced-usage/available-tools/apply-diff)\n    - [ask\\_followup\\_question](https://docs.roocode.com/advanced-usage/available-tools/ask-followup-question)\n    - [attempt\\_completion](https://docs.roocode.com/advanced-usage/available-tools/attempt-completion)\n    - [browser\\_action](https://docs.roocode.com/advanced-usage/available-tools/browser-action)\n    - [codebase\\_search](https://docs.roocode.com/advanced-usage/available-tools/codebase-search)\n    - [execute\\_command](https://docs.roocode.com/advanced-usage/available-tools/execute-command)\n    - [insert\\_content](https://docs.roocode.com/advanced-usage/available-tools/insert-content)\n    - [list\\_code\\_definition\\_names](https://docs.roocode.com/advanced-usage/available-tools/list-code-definition-names)\n    - [list\\_files](https://docs.roocode.com/advanced-usage/available-tools/list-files)\n    - [new\\_task](https://docs.roocode.com/advanced-usage/available-tools/new-task)\n    - [read\\_file](https://docs.roocode.com/advanced-usage/available-tools/read-file)\n    - [run\\_slash\\_command](https://docs.roocode.com/advanced-usage/available-tools/run-slash-command)\n    - [search\\_files](https://docs.roocode.com/advanced-usage/available-tools/search-files)\n    - [search\\_and\\_replace](https://docs.roocode.com/advanced-usage/available-tools/search-and-replace)\n    - [switch\\_mode](https://docs.roocode.com/advanced-usage/available-tools/switch-mode)\n    - [update\\_todo\\_list](https://docs.roocode.com/advanced-usage/available-tools/update-todo-list)\n    - [use\\_mcp\\_tool](https://docs.roocode.com/advanced-usage/available-tools/use-mcp-tool)\n    - [write\\_to\\_file](https://docs.roocode.com/advanced-usage/available-tools/write-to-file)\n  - [Context Poisoning](https://docs.roocode.com/advanced-usage/context-poisoning)\n  - [Working with Large Projects](https://docs.roocode.com/advanced-usage/large-projects)\n  - [Using Local Models](https://docs.roocode.com/advanced-usage/local-models)\n  - [Local Development Setup](https://docs.roocode.com/advanced-usage/local-development-setup)\n  - [Prompt Engineering Tips](https://docs.roocode.com/advanced-usage/prompt-engineering)\n  - [Prompt Structure](https://docs.roocode.com/advanced-usage/prompt-structure)\n  - [Rate Limits and Costs](https://docs.roocode.com/advanced-usage/rate-limits-costs)\n  - [Footgun Prompting](https://docs.roocode.com/advanced-usage/footgun-prompting)\n  - [Roo Code Nightly](https://docs.roocode.com/advanced-usage/roo-code-nightly)\n- [Model Providers](https://docs.roocode.com/advanced-usage/available-tools/use-mcp-tool#)\n\n- [FAQ](https://docs.roocode.com/advanced-usage/available-tools/use-mcp-tool#)\n\n- [Contributing (GitHub)](https://github.com/RooCodeInc/Roo-Code/blob/main/CONTRIBUTING.md)\n- [Roocabulary (GitHub)](https://github.com/cannuri/Roocabulary)\n- [Update Notes](https://docs.roocode.com/advanced-usage/available-tools/use-mcp-tool#)\n\n\n- [Home page](https://docs.roocode.com/)\n- Advanced Usage\n- Available Tools\n- use\\_mcp\\_tool\n\nCopy Page\n\nOn this page\n\n# use\\_mcp\\_tool\n\nThe `use_mcp_tool` tool enables interaction with external tools provided by connected Model Context Protocol (MCP) servers. It extends Roo's capabilities with domain-specific functionality through a standardized protocol.\n\n* * *\n\n## Parameters [​](https://docs.roocode.com/advanced-usage/available-tools/use-mcp-tool\\#parameters \"Direct link to Parameters\")\n\nThe tool accepts these parameters:\n\n- `server_name` (required): The name of the MCP server providing the tool\n- `tool_name` (required): The name of the tool to execute\n- `arguments` (required/optional): A JSON object containing the tool's input parameters, following the tool's input schema. May be optional for tools that require no input.\n\n* * *\n\n## What It Does [​](https://docs.roocode.com/advanced-usage/available-tools/use-mcp-tool\\#what-it-does \"Direct link to What It Does\")\n\nThis tool allows Roo to access specialized functionality provided by external MCP servers. Each MCP server can offer multiple tools with unique capabilities, extending Roo beyond its built-in functionality. The system validates arguments against schemas, manages server connections, and processes responses of various content types (text, image, resource).\n\n* * *\n\n## When is it used? [​](https://docs.roocode.com/advanced-usage/available-tools/use-mcp-tool\\#when-is-it-used \"Direct link to When is it used?\")\n\n- When specialized functionality not available in core tools is needed\n- When domain-specific operations are required\n- When integration with external systems or services is needed\n- When working with data that requires specific processing or analysis\n- When accessing proprietary tools through a standardized interface\n\n* * *\n\n## Key Features [​](https://docs.roocode.com/advanced-usage/available-tools/use-mcp-tool\\#key-features \"Direct link to Key Features\")\n\n- Uses the standardized MCP protocol via the `@modelcontextprotocol/sdk` library\n- Supports multiple transport mechanisms (StdioClientTransport, StreamableHTTPClientTransport and SSEClientTransport)\n- Validates arguments using Zod schema validation on both client and server sides\n- Processes multiple response content types: text, image, and resource references\n- Manages server lifecycle with automatic restarts when server code changes\n- Provides an \"always allow\" mechanism to bypass approval for trusted tools\n- Works with the companion `access_mcp_resource` tool for resource retrieval\n- Maintains proper error tracking and handling for failed operations\n- Supports configurable timeouts (1-3600 seconds, default: 60 seconds)\n- Allows file watchers to automatically detect and reload server changes\n\n* * *\n\n## Limitations [​](https://docs.roocode.com/advanced-usage/available-tools/use-mcp-tool\\#limitations \"Direct link to Limitations\")\n\n- Depends on external MCP servers being available and connected\n- Limited to the tools provided by connected servers\n- Tool capabilities vary between different MCP servers\n- Network issues can affect reliability and performance\n- Requires user approval before execution (unless in the \"always allow\" list)\n- Cannot execute multiple MCP tool operations simultaneously\n\n* * *\n\n## Server Configuration [​](https://docs.roocode.com/advanced-usage/available-tools/use-mcp-tool\\#server-configuration \"Direct link to Server Configuration\")\n\nMCP servers can be configured globally or at the project level:\n\n- **Global Configuration**: Managed through the Roo Code extension settings in VS Code. These apply across all projects unless overridden.\n- **Project-level Configuration**: Defined in a `.roo/mcp.json` file within your project's root directory.\n- This allows project-specific server setups.\n- Project-level servers take precedence over global servers if they share the same name.\n- Since `.roo/mcp.json` can be committed to version control, it simplifies sharing configurations with your team.\n\n* * *\n\n## How It Works [​](https://docs.roocode.com/advanced-usage/available-tools/use-mcp-tool\\#how-it-works \"Direct link to How It Works\")\n\nWhen the `use_mcp_tool` tool is invoked, it follows this process:\n\n1. **Initialization and Validation**:\n   - The system verifies that the MCP hub is available\n   - Confirms the specified server exists and is connected\n   - Validates the requested tool exists on the server\n   - Arguments are validated against the tool's schema definition\n   - Timeout settings are extracted from server configuration (default: 60 seconds)\n2. **Execution and Communication**:\n   - The system selects the appropriate transport mechanism:\n     - `StdioClientTransport`: For communicating with local processes via standard I/O\n     - `SSEClientTransport`: For communicating with HTTP servers via Server-Sent Events\n     - `StreamableHTTPClientTransport`: For communicating with HTTP servers via Streamable HTTP Events\n   - A request is sent with validated server name, tool name, and arguments\n   - Communication uses the `@modelcontextprotocol/sdk` library for standardized interactions\n   - Request execution is tracked with timeout handling to prevent hanging operations\n3. **Response Processing**:\n   - Responses can include multiple content types:\n     - Text content: Plain text responses\n     - Image content: Binary image data with MIME type information\n     - Resource references: URIs to access server resources (works with `access_mcp_resource`)\n   - The system checks the `isError` flag to determine if error handling is needed\n   - Results are formatted for display in the Roo interface\n4. **Resource and Error Handling**:\n   - The system uses WeakRef patterns to prevent memory leaks\n   - A consecutive mistake counter tracks and manages errors\n   - File watchers monitor for server code changes and trigger automatic restarts\n   - The security model requires approval for tool execution unless in the \"always allow\" list\n\n* * *\n\n## Security and Permissions [​](https://docs.roocode.com/advanced-usage/available-tools/use-mcp-tool\\#security-and-permissions \"Direct link to Security and Permissions\")\n\nThe MCP architecture provides several security features:\n\n- Users must approve tool usage before execution (by default)\n- Specific tools can be marked for automatic approval in the \"always allow\" list\n- Server configurations are validated with Zod schemas for integrity\n- Configurable timeouts prevent hanging operations (1-3600 seconds)\n- Server connections can be enabled or disabled through the UI\n\n* * *\n\n## Examples When Used [​](https://docs.roocode.com/advanced-usage/available-tools/use-mcp-tool\\#examples-when-used \"Direct link to Examples When Used\")\n\n- Analyzing specialized data formats using server-side processing tools\n- Generating images or other media through AI models hosted on external servers\n- Executing complex domain-specific calculations without local implementation\n- Accessing proprietary APIs or services through a controlled interface\n- Retrieving data from specialized databases or data sources\n\n* * *\n\n## Usage Examples [​](https://docs.roocode.com/advanced-usage/available-tools/use-mcp-tool\\#usage-examples \"Direct link to Usage Examples\")\n\nRequesting weather forecast data with text response:\n\n```codeBlockLines_e6Vv\n<use_mcp_tool>\n<server_name>weather-server</server_name>\n<tool_name>get_forecast</tool_name>\n<arguments>\n{\n  \"city\": \"San Francisco\",\n  \"days\": 5,\n  \"format\": \"text\"\n}\n</arguments>\n</use_mcp_tool>\n\n```\n\nAnalyzing source code with a specialized tool that returns JSON:\n\n```codeBlockLines_e6Vv\n<use_mcp_tool>\n<server_name>code-analysis</server_name>\n<tool_name>complexity_metrics</tool_name>\n<arguments>\n{\n  \"language\": \"typescript\",\n  \"file_path\": \"src/app.ts\",\n  \"include_functions\": true,\n  \"metrics\": [\"cyclomatic\", \"cognitive\"]\n}\n</arguments>\n</use_mcp_tool>\n\n```\n\nGenerating an image with specific parameters:\n\n```codeBlockLines_e6Vv\n<use_mcp_tool>\n<server_name>image-generation</server_name>\n<tool_name>create_image</tool_name>\n<arguments>\n{\n  \"prompt\": \"A futuristic city with flying cars\",\n  \"style\": \"photorealistic\",\n  \"dimensions\": {\n    \"width\": 1024,\n    \"height\": 768\n  },\n  \"format\": \"webp\"\n}\n</arguments>\n</use_mcp_tool>\n\n```\n\nAccessing a resource through a tool that returns a resource reference:\n\n```codeBlockLines_e6Vv\n<use_mcp_tool>\n<server_name>database-connector</server_name>\n<tool_name>query_and_store</tool_name>\n<arguments>\n{\n  \"database\": \"users\",\n  \"type\": \"select\",\n  \"fields\": [\"name\", \"email\", \"last_login\"],\n  \"where\": {\n    \"status\": \"active\"\n  },\n  \"store_as\": \"active_users\"\n}\n</arguments>\n</use_mcp_tool>\n\n```\n\nTool with no required arguments:\n\n```codeBlockLines_e6Vv\n<use_mcp_tool>\n<server_name>system-monitor</server_name>\n<tool_name>get_current_status</tool_name>\n<arguments>\n{}\n</arguments>\n</use_mcp_tool>\n\n```\n\n[Edit this page](https://github.com/RooCodeInc/Roo-Code-Docs/edit/main/docs/advanced-usage/available-tools/use-mcp-tool.md)\n\nLast updated on **Oct 3, 2025**\n\n[Previous\\\\\n\\\\\nupdate\\_todo\\_list](https://docs.roocode.com/advanced-usage/available-tools/update-todo-list) [Next\\\\\n\\\\\nwrite\\_to\\_file](https://docs.roocode.com/advanced-usage/available-tools/write-to-file)\n\n- [Parameters](https://docs.roocode.com/advanced-usage/available-tools/use-mcp-tool#parameters)\n- [What It Does](https://docs.roocode.com/advanced-usage/available-tools/use-mcp-tool#what-it-does)\n- [When is it used?](https://docs.roocode.com/advanced-usage/available-tools/use-mcp-tool#when-is-it-used)\n- [Key Features](https://docs.roocode.com/advanced-usage/available-tools/use-mcp-tool#key-features)\n- [Limitations](https://docs.roocode.com/advanced-usage/available-tools/use-mcp-tool#limitations)\n- [Server Configuration](https://docs.roocode.com/advanced-usage/available-tools/use-mcp-tool#server-configuration)\n- [How It Works](https://docs.roocode.com/advanced-usage/available-tools/use-mcp-tool#how-it-works)\n- [Security and Permissions](https://docs.roocode.com/advanced-usage/available-tools/use-mcp-tool#security-and-permissions)\n- [Examples When Used](https://docs.roocode.com/advanced-usage/available-tools/use-mcp-tool#examples-when-used)\n- [Usage Examples](https://docs.roocode.com/advanced-usage/available-tools/use-mcp-tool#usage-examples)\n\n![Roo Code Logo](https://docs.roocode.com/img/roo-code-logo-dark.png)\n\nEmpowering developers to build better software faster with AI-powered tools and insights.\n\n[GitHub](https://github.com/RooCodeInc/Roo-Code)[Discord](https://discord.gg/roocode)[Reddit](https://www.reddit.com/r/RooCode/)[X (Twitter)](https://x.com/roo_code)[LinkedIn](https://www.linkedin.com/company/roo-code)[TikTok](https://www.tiktok.com/@roo.code)[Bluesky](https://bsky.app/profile/roocode.bsky.social)\n\nGitHub\n\n- [Issues](https://github.com/RooCodeInc/Roo-Code/issues)\n- [Feature Requests](https://github.com/RooCodeInc/Roo-Code/discussions/categories/feature-requests?discussions_q=is%3Aopen+category%3A%22Feature+Requests%22+sort%3Atop)\n\nDownload\n\n- [VS Code Marketplace](https://marketplace.visualstudio.com/items?itemName=RooVeterinaryInc.roo-cline)\n- [Open VSX Registry](https://open-vsx.org/extension/RooVeterinaryInc/roo-cline)\n\nCompany\n\n- [Contact](mailto:support@roocode.com)\n- [Careers](https://careers.roocode.com/)\n- [Website Privacy Policy](https://roocode.com/privacy)\n- [Extension Privacy Policy](https://github.com/RooCodeInc/Roo-Code/blob/main/PRIVACY.md)\n\nLike most of the internet, we use cookies. Are you OK with that?\n\nDeclineAccept",
  "metadata": {
    "twitter:creator": "@roo_code",
    "viewport": "width=device-width, initial-scale=1.0",
    "twitter:site": "@roo_code",
    "ogUrl": "https://docs.roocode.com/advanced-usage/available-tools/use-mcp-tool",
    "og:url": "https://docs.roocode.com/advanced-usage/available-tools/use-mcp-tool",
    "docsearch:language": "en",
    "docusaurus_locale": "en",
    "ogLocale": "en_US",
    "docusaurus_version": "current",
    "twitter:image": "https://docs.roocode.com/img/social-share.jpg",
    "og:title": "use_mcp_tool | Roo Code Documentation",
    "language": "en",
    "favicon": "https://docs.roocode.com/img/favicon.ico",
    "og:locale": "en_US",
    "og:type": "website",
    "docusaurus_tag": "docs-default-current",
    "og:image": "https://docs.roocode.com/img/social-share.jpg",
    "og:description": "Discover how use_mcp_tool integrates external MCP servers to extend Roo Code with specialized tools, domain-specific functionality, and external services.",
    "ogTitle": "use_mcp_tool | Roo Code Documentation",
    "ogDescription": "Discover how use_mcp_tool integrates external MCP servers to extend Roo Code with specialized tools, domain-specific functionality, and external services.",
    "twitter:card": "summary_large_image",
    "description": "Discover how use_mcp_tool integrates external MCP servers to extend Roo Code with specialized tools, domain-specific functionality, and external services.",
    "docsearch:docusaurus_tag": "docs-default-current",
    "ogImage": "https://docs.roocode.com/img/social-share.jpg",
    "generator": "Docusaurus v3.9.2",
    "title": "use_mcp_tool | Roo Code Documentation",
    "docsearch:version": "current",
    "keywords": "use_mcp_tool,MCP tools,Model Context Protocol,external tools,Roo Code integration,MCP servers,domain tools,tool extension,VS Code AI",
    "scrapeId": "8fcb6ca9-327d-48c4-86a4-7e809bc7c317",
    "sourceURL": "https://docs.roocode.com/advanced-usage/available-tools/use-mcp-tool",
    "url": "https://docs.roocode.com/advanced-usage/available-tools/use-mcp-tool",
    "statusCode": 200,
    "contentType": "text/html; charset=utf-8",
    "proxyUsed": "basic",
    "cacheState": "miss",
    "creditsUsed": 1
  }
}