{
  "markdown": "Get comprehensive, actionable reviews directly in your PRs. [Try Roo's PR Reviewer](https://roocode.com/reviewer?utm_source=docs&utm_medium=banner&utm_campaign=reviewer_promo)\n\n[Skip to main content](https://docs.roocode.com/advanced-usage/prompt-structure#__docusaurus_skipToContent_fallback)\n\n[![Roo Code Logo](https://docs.roocode.com/img/roo-code-logo-dark.png)](https://docs.roocode.com/)\n\n`ctrl`  `K`\n\n[Reddit](https://www.reddit.com/r/RooCode/ \"Reddit\")[Discord](https://discord.gg/roocode \"Discord\")\n\n[20.3k](https://github.com/RooCodeInc/Roo-Code \"GitHub Repository\") [Install ·935.7k](https://marketplace.visualstudio.com/items?itemName=RooVeterinaryInc.roo-cline \"Install VS Code Extension\")\n\n- [Welcome](https://docs.roocode.com/)\n- [Getting Started](https://docs.roocode.com/advanced-usage/prompt-structure#)\n\n- [Tutorial Videos](https://docs.roocode.com/advanced-usage/prompt-structure#)\n\n- [Roo Code Cloud](https://docs.roocode.com/advanced-usage/prompt-structure#)\n\n- Features\n\n  - [API Configuration Profiles](https://docs.roocode.com/features/api-configuration-profiles)\n  - [Auto-Approving Actions](https://docs.roocode.com/features/auto-approving-actions)\n  - [Boomerang Tasks](https://docs.roocode.com/features/boomerang-tasks)\n  - [Browser Use](https://docs.roocode.com/features/browser-use)\n  - [Checkpoints](https://docs.roocode.com/features/checkpoints)\n  - [Code Actions](https://docs.roocode.com/features/code-actions)\n  - [Codebase Indexing](https://docs.roocode.com/features/codebase-indexing)\n  - [Custom Instructions](https://docs.roocode.com/features/custom-instructions)\n  - [Diagnostics Integration](https://docs.roocode.com/features/diagnostics-integration)\n  - [Customizing Modes](https://docs.roocode.com/features/custom-modes)\n  - [Diff/Fast Edits](https://docs.roocode.com/features/fast-edits)\n  - [Enhance Prompt](https://docs.roocode.com/features/enhance-prompt)\n  - [Import/Export/Reset Settings](https://docs.roocode.com/features/settings-management)\n  - [Intelligent Context Condensing](https://docs.roocode.com/features/intelligent-context-condensing)\n  - [Keyboard Navigation](https://docs.roocode.com/features/keyboard-shortcuts)\n  - [Roo Code Marketplace](https://docs.roocode.com/features/marketplace)\n  - [Message Queueing](https://docs.roocode.com/features/message-queueing)\n  - [Model Temperature](https://docs.roocode.com/features/model-temperature)\n  - [Multi-File Reads](https://docs.roocode.com/features/concurrent-file-reads)\n  - [.rooignore](https://docs.roocode.com/features/rooignore)\n  - [Slash Commands](https://docs.roocode.com/features/slash-commands)\n  - [Suggested Responses](https://docs.roocode.com/features/suggested-responses)\n  - [Task Todo List](https://docs.roocode.com/features/task-todo-list)\n  - [Terminal Shell Integration](https://docs.roocode.com/features/shell-integration)\n  - [MCP](https://docs.roocode.com/advanced-usage/prompt-structure#)\n\n  - [Experimental](https://docs.roocode.com/advanced-usage/prompt-structure#)\n\n  - [Additional Features](https://docs.roocode.com/features/more-features)\n- [Advanced Usage](https://docs.roocode.com/advanced-usage/prompt-structure#)\n\n  - [Available Tools](https://docs.roocode.com/advanced-usage/prompt-structure#)\n\n  - [Context Poisoning](https://docs.roocode.com/advanced-usage/context-poisoning)\n  - [Working with Large Projects](https://docs.roocode.com/advanced-usage/large-projects)\n  - [Using Local Models](https://docs.roocode.com/advanced-usage/local-models)\n  - [Local Development Setup](https://docs.roocode.com/advanced-usage/local-development-setup)\n  - [Prompt Engineering Tips](https://docs.roocode.com/advanced-usage/prompt-engineering)\n  - [Prompt Structure](https://docs.roocode.com/advanced-usage/prompt-structure)\n  - [Rate Limits and Costs](https://docs.roocode.com/advanced-usage/rate-limits-costs)\n  - [Footgun Prompting](https://docs.roocode.com/advanced-usage/footgun-prompting)\n  - [Roo Code Nightly](https://docs.roocode.com/advanced-usage/roo-code-nightly)\n- [Model Providers](https://docs.roocode.com/advanced-usage/prompt-structure#)\n\n- [FAQ](https://docs.roocode.com/advanced-usage/prompt-structure#)\n\n- [Contributing (GitHub)](https://github.com/RooCodeInc/Roo-Code/blob/main/CONTRIBUTING.md)\n- [Roocabulary (GitHub)](https://github.com/cannuri/Roocabulary)\n- [Update Notes](https://docs.roocode.com/advanced-usage/prompt-structure#)\n\n\n- [Home page](https://docs.roocode.com/)\n- Advanced Usage\n- Prompt Structure\n\nCopy Page\n\nOn this page\n\n# Prompt Structure\n\nThis page explains the technical structure of prompts in Roo Code - how messages are constructed and sent to the Large Language Model (LLM).\n\n* * *\n\n## Core Message Types [​](https://docs.roocode.com/advanced-usage/prompt-structure\\#core-message-types \"Direct link to Core Message Types\")\n\nRoo Code uses three primary message types when communicating with LLMs:\n\n- **System Prompt**: The initial instructions that define Roo's capabilities, persona, and operational rules\n- **User Messages**: Content sent by you (the user) to Roo\n- **Assistant Messages**: Responses generated by the LLM based on your requests\n\nAt the API level, there's also a fourth message role:\n\n- **Tool Messages**: Results returned from tool executions, sent back to the LLM as input\n\nUnderstanding these message types helps you work more effectively with Roo and can be valuable for troubleshooting or advanced customization.\n\n* * *\n\n## System Prompt [​](https://docs.roocode.com/advanced-usage/prompt-structure\\#system-prompt \"Direct link to System Prompt\")\n\nThe system prompt is the foundation of Roo's behavior. It contains:\n\n- **Role Definition**: The core persona instructions based on the selected mode (Code, Ask, Debug, etc.)\n- **Tool Descriptions**: Detailed information about available tools, including parameters and examples\n- **Tool Use Guidelines**: Rules for how tools should be used (sequential execution, waiting for results)\n- **Capabilities**: Description of what Roo can do in the current environment\n- **Available Modes**: List of all available modes and their descriptions\n- **Operational Rules**: Critical guidelines for handling files, project structure, and user interaction\n- **System Information**: Details about your environment (OS, shell, working directory)\n- **Custom Instructions**: Your global and mode-specific customizations\n\nThe system prompt is generated dynamically each time you interact with Roo, adapting to your current mode, available tools, and custom settings.\n\n### Custom System Prompts [​](https://docs.roocode.com/advanced-usage/prompt-structure\\#custom-system-prompts \"Direct link to Custom System Prompts\")\n\nAdvanced users can create custom system prompts for specific modes by placing a `.roo/system-prompt-<mode_slug>` file in their workspace. When present, Roo uses this file instead of generating the standard system prompt sections, allowing for complete customization of Roo's behavior in that mode.\n\n* * *\n\n## User Messages [​](https://docs.roocode.com/advanced-usage/prompt-structure\\#user-messages \"Direct link to User Messages\")\n\nUser messages contain your direct inputs to Roo, plus additional contextual information:\n\n- **Your Query**: The text you type in the chat interface\n- **Images**: Any images you include in your message (for supported models)\n- **Environment Details**: Automatically appended information about your workspace state:\n  - Open files/tabs\n  - Cursor position\n  - Active terminals with output\n  - Recently modified files\n  - Current time\n  - Token/cost information\n  - Current mode\n  - File listing (on initial connection)\n\nThis automatic context enrichment helps Roo understand your workspace without requiring you to explicitly describe it.\n\n* * *\n\n## Assistant Messages [​](https://docs.roocode.com/advanced-usage/prompt-structure\\#assistant-messages \"Direct link to Assistant Messages\")\n\nAssistant messages are the LLM's responses, which may include:\n\n- **Text Responses**: Direct answers to your queries\n- **Thinking**: Internal reasoning process (visible when enabled)\n- **Tool Calls**: Requests to use specific tools like reading files or executing commands\n\nNote that while assistant messages contain tool calls, the results of those tools are sent back to the LLM in separate tool messages, not as part of the assistant message itself.\n\n* * *\n\n## Message Flow [​](https://docs.roocode.com/advanced-usage/prompt-structure\\#message-flow \"Direct link to Message Flow\")\n\nHere's how these components work together:\n\n1. **Initial Setup**: Roo generates the system prompt based on your selected mode and configuration\n2. **User Input**: You send a message, which is enriched with environment details\n3. **LLM Processing**: The LLM receives all previous messages plus your new input\n4. **Assistant Response**: The LLM generates a response, potentially using tools\n5. **Tool Execution**: If the LLM requests a tool, Roo executes it and provides the result\n6. **Conversation History**: All messages are maintained in a structured history for context\n\n* * *\n\n## Technical Implementation [​](https://docs.roocode.com/advanced-usage/prompt-structure\\#technical-implementation \"Direct link to Technical Implementation\")\n\nInternally, Roo's prompt construction is handled by several components:\n\n- **System Prompt Generation**: The `SYSTEM_PROMPT` function in `src/core/prompts/system.ts` assembles the complete system prompt\n- **Section Generators**: Specialized functions create each section of the system prompt\n- **Message Transformation**: Provider-specific transformers convert Roo's internal message format to the format required by each LLM API\n- **Custom Prompt Loading**: The `loadSystemPromptFile` function checks for and processes custom system prompt files\n\n* * *\n\n## Support Prompts [​](https://docs.roocode.com/advanced-usage/prompt-structure\\#support-prompts \"Direct link to Support Prompts\")\n\nAlongside the main chat flow, Roo uses specialized templates for specific code actions:\n\n- **Code Action Prompts**: For commands like \"Explain\", \"Fix\", \"Improve\", or \"Add to Context\"\n- **Template-Based**: Generated from templates in `src/shared/support-prompt.ts`\n- **Independent Context**: Often operates without the main chat history\n- **Task-Specific Format**: Optimized for the specific code task being performed\n\nThese support prompts work outside the normal conversation flow to provide focused assistance for specific coding tasks.\n\n* * *\n\n## Optimizing Your Interactions [​](https://docs.roocode.com/advanced-usage/prompt-structure\\#optimizing-your-interactions \"Direct link to Optimizing Your Interactions\")\n\nUnderstanding this structure can help you:\n\n- **Write Better Prompts**: Knowing what context Roo already has helps you avoid redundant information\n- **Troubleshoot Issues**: Understanding message flow helps identify where problems might occur\n- **Create Custom Modes**: With knowledge of the system prompt structure, you can create more effective custom modes\n- **Use Custom System Prompts**: Advanced users can create entirely custom system prompts for specialized use cases\n\nThis technical foundation powers all of Roo's capabilities, enabling it to understand your requests and effectively utilize available tools to complete tasks.\n\n[Edit this page](https://github.com/RooCodeInc/Roo-Code-Docs/edit/main/docs/advanced-usage/prompt-structure.md)\n\nLast updated on **Oct 3, 2025**\n\n[Previous\\\\\n\\\\\nPrompt Engineering Tips](https://docs.roocode.com/advanced-usage/prompt-engineering) [Next\\\\\n\\\\\nRate Limits and Costs](https://docs.roocode.com/advanced-usage/rate-limits-costs)\n\n- [Core Message Types](https://docs.roocode.com/advanced-usage/prompt-structure#core-message-types)\n- [System Prompt](https://docs.roocode.com/advanced-usage/prompt-structure#system-prompt)\n  - [Custom System Prompts](https://docs.roocode.com/advanced-usage/prompt-structure#custom-system-prompts)\n- [User Messages](https://docs.roocode.com/advanced-usage/prompt-structure#user-messages)\n- [Assistant Messages](https://docs.roocode.com/advanced-usage/prompt-structure#assistant-messages)\n- [Message Flow](https://docs.roocode.com/advanced-usage/prompt-structure#message-flow)\n- [Technical Implementation](https://docs.roocode.com/advanced-usage/prompt-structure#technical-implementation)\n- [Support Prompts](https://docs.roocode.com/advanced-usage/prompt-structure#support-prompts)\n- [Optimizing Your Interactions](https://docs.roocode.com/advanced-usage/prompt-structure#optimizing-your-interactions)\n\n![Roo Code Logo](https://docs.roocode.com/img/roo-code-logo-dark.png)\n\nEmpowering developers to build better software faster with AI-powered tools and insights.\n\n[GitHub](https://github.com/RooCodeInc/Roo-Code)[Discord](https://discord.gg/roocode)[Reddit](https://www.reddit.com/r/RooCode/)[X (Twitter)](https://x.com/roo_code)[LinkedIn](https://www.linkedin.com/company/roo-code)[TikTok](https://www.tiktok.com/@roo.code)[Bluesky](https://bsky.app/profile/roocode.bsky.social)\n\nGitHub\n\n- [Issues](https://github.com/RooCodeInc/Roo-Code/issues)\n- [Feature Requests](https://github.com/RooCodeInc/Roo-Code/discussions/categories/feature-requests?discussions_q=is%3Aopen+category%3A%22Feature+Requests%22+sort%3Atop)\n\nDownload\n\n- [VS Code Marketplace](https://marketplace.visualstudio.com/items?itemName=RooVeterinaryInc.roo-cline)\n- [Open VSX Registry](https://open-vsx.org/extension/RooVeterinaryInc/roo-cline)\n\nCompany\n\n- [Contact](mailto:support@roocode.com)\n- [Careers](https://careers.roocode.com/)\n- [Website Privacy Policy](https://roocode.com/privacy)\n- [Extension Privacy Policy](https://github.com/RooCodeInc/Roo-Code/blob/main/PRIVACY.md)\n\nLike most of the internet, we use cookies. Are you OK with that?\n\nDeclineAccept",
  "metadata": {
    "title": "Prompt Structure | Roo Code Documentation",
    "docusaurus_tag": "docs-default-current",
    "ogImage": "https://docs.roocode.com/img/social-share.jpg",
    "ogUrl": "https://docs.roocode.com/advanced-usage/prompt-structure",
    "docsearch:version": "current",
    "og:image": "https://docs.roocode.com/img/social-share.jpg",
    "og:description": "Understand the technical structure of prompts in Roo Code. Learn how messages are constructed, system prompts work, and optimize your interactions.",
    "twitter:image": "https://docs.roocode.com/img/social-share.jpg",
    "keywords": "prompt structure,system prompt,message flow,technical documentation,LLM communication",
    "favicon": "https://docs.roocode.com/img/favicon.ico",
    "twitter:card": "summary_large_image",
    "ogTitle": "Prompt Structure | Roo Code Documentation",
    "twitter:creator": "@roo_code",
    "docusaurus_version": "current",
    "ogLocale": "en_US",
    "docsearch:docusaurus_tag": "docs-default-current",
    "description": "Understand the technical structure of prompts in Roo Code. Learn how messages are constructed, system prompts work, and optimize your interactions.",
    "generator": "Docusaurus v3.9.2",
    "ogDescription": "Understand the technical structure of prompts in Roo Code. Learn how messages are constructed, system prompts work, and optimize your interactions.",
    "og:url": "https://docs.roocode.com/advanced-usage/prompt-structure",
    "docusaurus_locale": "en",
    "og:title": "Prompt Structure | Roo Code Documentation",
    "og:locale": "en_US",
    "twitter:site": "@roo_code",
    "og:type": "website",
    "viewport": "width=device-width, initial-scale=1.0",
    "language": "en",
    "docsearch:language": "en",
    "scrapeId": "e3c49c58-bb81-41ba-88a8-8b460a1f762b",
    "sourceURL": "https://docs.roocode.com/advanced-usage/prompt-structure",
    "url": "https://docs.roocode.com/advanced-usage/prompt-structure",
    "statusCode": 200,
    "contentType": "text/html; charset=utf-8",
    "proxyUsed": "basic",
    "cacheState": "miss",
    "indexId": "ae2c94ee-195e-4085-9771-5bbf7b85980f",
    "creditsUsed": 1
  }
}