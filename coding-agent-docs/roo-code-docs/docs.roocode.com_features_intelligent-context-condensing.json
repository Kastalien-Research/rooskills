{
  "markdown": "Get comprehensive, actionable reviews directly in your PRs. [Try Roo's PR Reviewer](https://roocode.com/reviewer?utm_source=docs&utm_medium=banner&utm_campaign=reviewer_promo)\n\n[Skip to main content](https://docs.roocode.com/features/intelligent-context-condensing#__docusaurus_skipToContent_fallback)\n\n[![Roo Code Logo](https://docs.roocode.com/img/roo-code-logo-dark.png)](https://docs.roocode.com/)\n\n`ctrl`  `K`\n\n[Reddit](https://www.reddit.com/r/RooCode/ \"Reddit\")[Discord](https://discord.gg/roocode \"Discord\")\n\n[20.3k](https://github.com/RooCodeInc/Roo-Code \"GitHub Repository\") [Install ·574.1k](https://marketplace.visualstudio.com/items?itemName=RooVeterinaryInc.roo-cline \"Install VS Code Extension\")\n\n- [Welcome](https://docs.roocode.com/)\n- [Getting Started](https://docs.roocode.com/features/intelligent-context-condensing#)\n\n- [Tutorial Videos](https://docs.roocode.com/features/intelligent-context-condensing#)\n\n- [Roo Code Cloud](https://docs.roocode.com/features/intelligent-context-condensing#)\n\n- Features\n\n  - [API Configuration Profiles](https://docs.roocode.com/features/api-configuration-profiles)\n  - [Auto-Approving Actions](https://docs.roocode.com/features/auto-approving-actions)\n  - [Boomerang Tasks](https://docs.roocode.com/features/boomerang-tasks)\n  - [Browser Use](https://docs.roocode.com/features/browser-use)\n  - [Checkpoints](https://docs.roocode.com/features/checkpoints)\n  - [Code Actions](https://docs.roocode.com/features/code-actions)\n  - [Codebase Indexing](https://docs.roocode.com/features/codebase-indexing)\n  - [Custom Instructions](https://docs.roocode.com/features/custom-instructions)\n  - [Diagnostics Integration](https://docs.roocode.com/features/diagnostics-integration)\n  - [Customizing Modes](https://docs.roocode.com/features/custom-modes)\n  - [Diff/Fast Edits](https://docs.roocode.com/features/fast-edits)\n  - [Enhance Prompt](https://docs.roocode.com/features/enhance-prompt)\n  - [Import/Export/Reset Settings](https://docs.roocode.com/features/settings-management)\n  - [Intelligent Context Condensing](https://docs.roocode.com/features/intelligent-context-condensing)\n  - [Keyboard Navigation](https://docs.roocode.com/features/keyboard-shortcuts)\n  - [Roo Code Marketplace](https://docs.roocode.com/features/marketplace)\n  - [Message Queueing](https://docs.roocode.com/features/message-queueing)\n  - [Model Temperature](https://docs.roocode.com/features/model-temperature)\n  - [Multi-File Reads](https://docs.roocode.com/features/concurrent-file-reads)\n  - [.rooignore](https://docs.roocode.com/features/rooignore)\n  - [Slash Commands](https://docs.roocode.com/features/slash-commands)\n  - [Suggested Responses](https://docs.roocode.com/features/suggested-responses)\n  - [Task Todo List](https://docs.roocode.com/features/task-todo-list)\n  - [Terminal Shell Integration](https://docs.roocode.com/features/shell-integration)\n  - [MCP](https://docs.roocode.com/features/intelligent-context-condensing#)\n\n  - [Experimental](https://docs.roocode.com/features/intelligent-context-condensing#)\n\n  - [Additional Features](https://docs.roocode.com/features/more-features)\n- [Advanced Usage](https://docs.roocode.com/features/intelligent-context-condensing#)\n\n- [Model Providers](https://docs.roocode.com/features/intelligent-context-condensing#)\n\n- [FAQ](https://docs.roocode.com/features/intelligent-context-condensing#)\n\n- [Contributing (GitHub)](https://github.com/RooCodeInc/Roo-Code/blob/main/CONTRIBUTING.md)\n- [Roocabulary (GitHub)](https://github.com/cannuri/Roocabulary)\n- [Update Notes](https://docs.roocode.com/features/intelligent-context-condensing#)\n\n\n- [Home page](https://docs.roocode.com/)\n- Features\n- Intelligent Context Condensing\n\nCopy Page\n\nOn this page\n\n# Intelligent Context Condensing\n\nThe Intelligent Context Condensing feature helps manage long conversations by summarizing earlier parts of the dialogue. This prevents important information from being lost when the context window nears its limit. This feature is **enabled by default**.\n\nHow to use Context Condensing in Roo Code \\| Detailed Tutorial - YouTube\n\n[Photo image of Roo Code](https://www.youtube.com/channel/UCfCnIRjGVRzwy8YqelcV13w?embeds_referring_euri=https%3A%2F%2Fdocs.roocode.com%2F)\n\nRoo Code\n\n3.81K subscribers\n\n[How to use Context Condensing in Roo Code \\| Detailed Tutorial](https://www.youtube.com/watch?v=9k8OAXlszak)\n\nRoo Code\n\nSearch\n\nWatch later\n\nShare\n\nCopy link\n\nInfo\n\nShopping\n\nTap to unmute\n\nIf playback doesn't begin shortly, try restarting your device.\n\nMore videos\n\n## More videos\n\nYou're signed out\n\nVideos you watch may be added to the TV's watch history and influence TV recommendations. To avoid this, cancel and sign in to YouTube on your computer.\n\nCancelConfirm\n\nShare\n\nInclude playlist\n\nAn error occurred while retrieving sharing information. Please try again later.\n\n[Watch on](https://www.youtube.com/watch?v=9k8OAXlszak&embeds_referring_euri=https%3A%2F%2Fdocs.roocode.com%2F)\n\n0:00\n\n0:00 / 1:55\n•Live\n\n•\n\n* * *\n\n## How It Works [​](https://docs.roocode.com/features/intelligent-context-condensing\\#how-it-works \"Direct link to How It Works\")\n\nAs your conversation with Roo Code grows, it might approach the context window limit of the underlying AI model. When this happens, older messages would typically be removed to make space. Intelligent Context Condensing aims to prevent this abrupt loss by:\n\n1. **Summarizing:** Using an AI model, it condenses earlier parts of the conversation.\n2. **Retaining Essentials:** The goal is to reduce the overall token count while keeping the key information from the summarized messages.\n3. **Maintaining Flow:** This allows the AI to have a more coherent understanding of the entire conversation, even very long ones.\n4. **Preserving First Message:** The first message containing slash commands or initial context is always preserved during condensing, ensuring critical initial instructions aren't lost.\n\n**Important Considerations:**\n\n- **Summarization Impact:** While original messages are preserved if you use [Checkpoints](https://docs.roocode.com/features/checkpoints) to rewind, the summarized version is what's used in ongoing LLM calls to keep the context manageable.\n- **Cost:** The AI call to perform the summarization incurs a cost. This cost is included in the context condensing metrics displayed in the UI.\n- **First Message Protection:** The initial message with slash commands or setup instructions will never be condensed.\n\n* * *\n\n## Configuration [​](https://docs.roocode.com/features/intelligent-context-condensing\\#configuration \"Direct link to Configuration\")\n\nIntelligent Context Condensing is **enabled by default** and offers several configuration options:\n\n1. Open Roo Code settings ( icon in the top right corner of the Roo Code panel).\n2. Navigate to the \"Context\" settings section for context-related options, or the \"Prompt\" settings section for the custom prompt.\n3. Configure the available options:\n   - **Automatically trigger intelligent context condensing**: Enabled by default, this controls whether condensing happens automatically (found in \"Context\" settings)\n   - **Threshold to trigger intelligent context condensing**: A percentage slider (default 100%) that determines when condensing activates based on context window usage (found in \"Context\" settings)\n   - **API Configuration for Context Condensing**: Choose which API configuration to use for condensing operations (defaults to your current active configuration) (found in \"Context\" settings)\n   - **Custom Context Condensing Prompt**: Customize the system prompt used for context condensing operations (found in \"Prompt\" settings)\n\n![Settings for Intelligent Context Condensing](https://docs.roocode.com/img/intelligent-context-condensing/intelligent-context-condensing.png)\n\n## _Intelligent Context Condensing configuration options: automatic triggering toggle, threshold slider, API configuration selection, and custom prompt customization._ [​](https://docs.roocode.com/features/intelligent-context-condensing\\#intelligent-context-condensing-configuration-options-automatic-triggering-toggle-threshold-slider-api-configuration-selection-and-custom-prompt-customization \"Direct link to intelligent-context-condensing-configuration-options-automatic-triggering-toggle-threshold-slider-api-configuration-selection-and-custom-prompt-customization\")\n\n## Controlling and Understanding Context Condensing [​](https://docs.roocode.com/features/intelligent-context-condensing\\#controlling-and-understanding-context-condensing \"Direct link to Controlling and Understanding Context Condensing\")\n\nRoo Code provides several ways to control and understand the Intelligent Context Condensing feature:\n\n### Controlling Context Condensing [​](https://docs.roocode.com/features/intelligent-context-condensing\\#controlling-context-condensing \"Direct link to Controlling Context Condensing\")\n\n- **Automatic Threshold:** The threshold slider in \"Context\" settings allows you to define a percentage (e.g., 80%) of context window usage. Roo Code will attempt to condense the context automatically when the conversation reaches this level of capacity.\n\n- **API Configuration:** Select which API configuration to use for context condensing operations. This allows you to use a different provider or model specifically for condensing if desired.\n\n- **Custom Prompts:** Modify the system prompt used for condensing to better suit your workflow or to emphasize certain aspects of conversation summarization.\n\n- **Manual Trigger:** A **Condense Context** button is available at the top of the task, positioned to the right of the context bar. This allows you to initiate the context condensing process at any time.\n![Manual Condense Context button in expanded task view](https://docs.roocode.com/img/intelligent-context-condensing/intelligent-context-condensing-1.png)\n_The Manual Condense Context button (highlighted with a yellow arrow) is easily accessible for manual control._\n\n\n### Understanding Context Condensing Activity [​](https://docs.roocode.com/features/intelligent-context-condensing\\#understanding-context-condensing-activity \"Direct link to Understanding Context Condensing Activity\")\n\n- **Context Condensing Metrics:** When context condensing occurs, Roo Code displays:\n  - The context token counts before and after context condensing.\n  - The cost associated with the context condensing AI call.\n  - An expandable summary detailing what was condensed (this information is part of the `ContextCondenseRow` component visible in the chat history).\n\n![Context condensed message in chat](https://docs.roocode.com/img/intelligent-context-condensing/intelligent-context-condensing-2.png)\n\n_After context condensing, a message indicates the context has been condensed, showing token changes and cost._\n\n- **Visual Indicators:**\n  - A progress indicator (\"Condensing context...\") is shown in the chat interface while context condensing is active.\n\n![Condensing context progress indicator in chat](https://docs.roocode.com/img/intelligent-context-condensation/intelligent-context-condensation-3.png)\n\n_The \"Condensing context...\" indicator appears in the chat during the process._\n\n- The task header also displays the current context condensing status.\n- The `ContextWindowProgress` bar offers a visual representation of token distribution, including current usage, space reserved for the AI's output, available space, and raw token numbers.\n- **Interface Clarity:** The \"Condense Context\" button includes a tooltip explaining its function, available in all supported languages.\n\n* * *\n\n## Tips for Effective Context Condensing [​](https://docs.roocode.com/features/intelligent-context-condensing\\#tips-for-effective-context-condensing \"Direct link to Tips for Effective Context Condensing\")\n\n### Customizing the Context Condensing Prompt [​](https://docs.roocode.com/features/intelligent-context-condensing\\#customizing-the-context-condensing-prompt \"Direct link to Customizing the Context Condensing Prompt\")\n\nYou can customize the context reduction prompt to better suit your specific domain or use case. This is particularly useful if you find that the default condensing process loses important information specific to your workflow.\n\nTo customize the prompt:\n\n1. Go to Roo Code settings ( icon)\n2. Navigate to the \"Prompt\" settings section\n3. Find the \"Custom Context Condensing Prompt\" in the pulldown\n4. Enter your custom prompt that instructs the AI on how to preserve specific types of information\n\nFor example, if you're working on a complex debugging session, you might add instructions like:\n\n- \"Always preserve error messages and stack traces in full\"\n- \"Maintain all variable names and their last known values\"\n- \"Keep track of all attempted solutions and their outcomes\"\n\nThis customization ensures that the context condensing process retains the information most critical to your specific use case.\n\n* * *\n\n## Automatic Error Recovery [​](https://docs.roocode.com/features/intelligent-context-condensing\\#automatic-error-recovery \"Direct link to Automatic Error Recovery\")\n\nWhen Roo Code encounters context window limit errors, it now automatically recovers to keep your work flowing:\n\n### How Error Recovery Works [​](https://docs.roocode.com/features/intelligent-context-condensing\\#how-error-recovery-works \"Direct link to How Error Recovery Works\")\n\n1. **Error Detection**: Roo Code detects context window errors from multiple providers (OpenAI, Anthropic, Cerebras, and others)\n2. **Automatic Truncation**: The system automatically reduces the context by 25%\n3. **Retry Mechanism**: After truncation, Roo Code retries your request (up to 3 attempts)\n4. **Seamless Continuation**: Your work continues without manual intervention\n\nThis automatic recovery ensures that:\n\n- You don't lose work due to context limit errors\n- Long conversations can continue smoothly\n- The system intelligently manages context without requiring manual restarts\n\n### When Recovery Triggers [​](https://docs.roocode.com/features/intelligent-context-condensing\\#when-recovery-triggers \"Direct link to When Recovery Triggers\")\n\nThe automatic recovery activates when:\n\n- The API returns a context window exceeded error\n- The conversation approaches the maximum token limit\n- Multiple providers report similar context-related errors\n\nThis feature works alongside Intelligent Context Condensing to provide multiple layers of context management, ensuring your conversations can continue even in challenging scenarios.\n\n* * *\n\n## Technical Implementation [​](https://docs.roocode.com/features/intelligent-context-condensing\\#technical-implementation \"Direct link to Technical Implementation\")\n\n### Token Counting [​](https://docs.roocode.com/features/intelligent-context-condensing\\#token-counting \"Direct link to Token Counting\")\n\nRoo Code uses a sophisticated token counting system that:\n\n- Employs native token counting endpoints when available (e.g., Anthropic's API)\n- Falls back to tiktoken estimation if API calls fail\n- Provides accurate counting for different content types:\n  - Text content: Uses word-based estimation with punctuation and newline overhead\n  - Image content: Uses a conservative estimate of 300 tokens per image\n  - System prompts: Includes additional overhead for structural elements\n\n### Context Window Management [​](https://docs.roocode.com/features/intelligent-context-condensing\\#context-window-management \"Direct link to Context Window Management\")\n\n- By default, 30% of the context window is reserved (20% for model output and 10% as a safety buffer), leaving 70% available for conversation history.\n- This reservation can be overridden by model-specific settings\n- The system automatically calculates available space while maintaining this reservation\n\n### Error Handling Strategy [​](https://docs.roocode.com/features/intelligent-context-condensing\\#error-handling-strategy \"Direct link to Error Handling Strategy\")\n\n- **Multi-Provider Support**: Recognizes context errors from OpenAI, Anthropic, Cerebras, and other providers\n- **Progressive Reduction**: Reduces context by 25% on each retry attempt\n- **Retry Limits**: Maximum of 3 automatic retry attempts before requiring manual intervention\n- **State Preservation**: Maintains conversation state during recovery attempts\n\n[Edit this page](https://github.com/RooCodeInc/Roo-Code-Docs/edit/main/docs/features/intelligent-context-condensing.mdx)\n\nLast updated on **Oct 3, 2025**\n\n[Previous\\\\\n\\\\\nImport/Export/Reset Settings](https://docs.roocode.com/features/settings-management) [Next\\\\\n\\\\\nKeyboard Navigation](https://docs.roocode.com/features/keyboard-shortcuts)\n\n- [How It Works](https://docs.roocode.com/features/intelligent-context-condensing#how-it-works)\n- [Configuration](https://docs.roocode.com/features/intelligent-context-condensing#configuration)\n- [_Intelligent Context Condensing configuration options: automatic triggering toggle, threshold slider, API configuration selection, and custom prompt customization._](https://docs.roocode.com/features/intelligent-context-condensing#intelligent-context-condensing-configuration-options-automatic-triggering-toggle-threshold-slider-api-configuration-selection-and-custom-prompt-customization)\n- [Controlling and Understanding Context Condensing](https://docs.roocode.com/features/intelligent-context-condensing#controlling-and-understanding-context-condensing)\n  - [Controlling Context Condensing](https://docs.roocode.com/features/intelligent-context-condensing#controlling-context-condensing)\n  - [Understanding Context Condensing Activity](https://docs.roocode.com/features/intelligent-context-condensing#understanding-context-condensing-activity)\n- [Tips for Effective Context Condensing](https://docs.roocode.com/features/intelligent-context-condensing#tips-for-effective-context-condensing)\n  - [Customizing the Context Condensing Prompt](https://docs.roocode.com/features/intelligent-context-condensing#customizing-the-context-condensing-prompt)\n- [Automatic Error Recovery](https://docs.roocode.com/features/intelligent-context-condensing#automatic-error-recovery)\n  - [How Error Recovery Works](https://docs.roocode.com/features/intelligent-context-condensing#how-error-recovery-works)\n  - [When Recovery Triggers](https://docs.roocode.com/features/intelligent-context-condensing#when-recovery-triggers)\n- [Technical Implementation](https://docs.roocode.com/features/intelligent-context-condensing#technical-implementation)\n  - [Token Counting](https://docs.roocode.com/features/intelligent-context-condensing#token-counting)\n  - [Context Window Management](https://docs.roocode.com/features/intelligent-context-condensing#context-window-management)\n  - [Error Handling Strategy](https://docs.roocode.com/features/intelligent-context-condensing#error-handling-strategy)\n\n![Roo Code Logo](https://docs.roocode.com/img/roo-code-logo-dark.png)\n\nEmpowering developers to build better software faster with AI-powered tools and insights.\n\n[GitHub](https://github.com/RooCodeInc/Roo-Code)[Discord](https://discord.gg/roocode)[Reddit](https://www.reddit.com/r/RooCode/)[X (Twitter)](https://x.com/roo_code)[LinkedIn](https://www.linkedin.com/company/roo-code)[TikTok](https://www.tiktok.com/@roo.code)[Bluesky](https://bsky.app/profile/roocode.bsky.social)\n\nGitHub\n\n- [Issues](https://github.com/RooCodeInc/Roo-Code/issues)\n- [Feature Requests](https://github.com/RooCodeInc/Roo-Code/discussions/categories/feature-requests?discussions_q=is%3Aopen+category%3A%22Feature+Requests%22+sort%3Atop)\n\nDownload\n\n- [VS Code Marketplace](https://marketplace.visualstudio.com/items?itemName=RooVeterinaryInc.roo-cline)\n- [Open VSX Registry](https://open-vsx.org/extension/RooVeterinaryInc/roo-cline)\n\nCompany\n\n- [Contact](mailto:support@roocode.com)\n- [Careers](https://careers.roocode.com/)\n- [Website Privacy Policy](https://roocode.com/privacy)\n- [Extension Privacy Policy](https://github.com/RooCodeInc/Roo-Code/blob/main/PRIVACY.md)\n\nLike most of the internet, we use cookies. Are you OK with that?\n\nDeclineAccept",
  "metadata": {
    "twitter:card": "summary_large_image",
    "docsearch:docusaurus_tag": "docs-default-current",
    "og:url": "https://docs.roocode.com/features/intelligent-context-condensing",
    "og:title": "Intelligent Context Condensing | Roo Code Documentation",
    "title": "Intelligent Context Condensing | Roo Code Documentation",
    "language": "en",
    "docsearch:language": "en",
    "twitter:image": "https://docs.roocode.com/img/social-share.jpg",
    "keywords": "context condensing,context window,conversation management,token optimization,AI summarization",
    "docusaurus_tag": "docs-default-current",
    "ogTitle": "Intelligent Context Condensing | Roo Code Documentation",
    "twitter:site": "@roo_code",
    "og:image": "https://docs.roocode.com/img/social-share.jpg",
    "twitter:creator": "@roo_code",
    "ogLocale": "en_US",
    "ogDescription": "Learn how Intelligent Context Condensing helps manage long conversations by summarizing earlier dialogue to prevent information loss when approaching context limits.",
    "docusaurus_locale": "en",
    "ogUrl": "https://docs.roocode.com/features/intelligent-context-condensing",
    "og:locale": "en_US",
    "docusaurus_version": "current",
    "og:description": "Learn how Intelligent Context Condensing helps manage long conversations by summarizing earlier dialogue to prevent information loss when approaching context limits.",
    "og:type": "website",
    "viewport": [
      "width=device-width, initial-scale=1.0",
      "width=device-width, initial-scale=1"
    ],
    "favicon": "https://docs.roocode.com/img/favicon.ico",
    "docsearch:version": "current",
    "description": "Learn how Intelligent Context Condensing helps manage long conversations by summarizing earlier dialogue to prevent information loss when approaching context limits.",
    "ogImage": "https://docs.roocode.com/img/social-share.jpg",
    "generator": "Docusaurus v3.9.2",
    "scrapeId": "ffbf57db-95b9-43c1-8bf9-f223cb7203ba",
    "sourceURL": "https://docs.roocode.com/features/intelligent-context-condensing",
    "url": "https://docs.roocode.com/features/intelligent-context-condensing",
    "statusCode": 200,
    "contentType": "text/html; charset=utf-8",
    "proxyUsed": "basic",
    "cacheState": "miss",
    "indexId": "b0806ada-7e1d-4a64-91c1-a216bcea4cd0",
    "creditsUsed": 1
  }
}